/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
"use strict";angular.module("janusHangouts",["ngAnimate","ngSanitize","blockUI","ui.router","ui.bootstrap","ngEmbed","janusHangouts.config","toastr","pascalprecht.translate","ab-base64"]).config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("signin",{url:"/feedback",templateUrl:"app/signin/signin.html",controller:"SigninController",controllerAs:"vm"}).state("pluginhelp",{url:"/pluginhelp",templateUrl:"app/pages/plugin.html",controller:"PluginController"}).state("home",{url:"/:uuid",templateUrl:"app/main/main.html",controller:"MainCtrl"}),n.otherwise("/feedback")}]).config(["blockUIConfig",function(e){e.templateUrl="app/components/room/consent-dialog.html",e.cssClass="block-ui block-ui-anim-fade consent-dialog",e.autoBlock=!1}]).config(["$translateProvider",function(e){var n=window.localStorage.lang||"zh-cn";e.preferredLanguage(n),e.useStaticFilesLoader({prefix:window.staticprefix+"/i18n/",suffix:".json"})}]).factory("T",["$translate",function(e){var n={T:function(n){return n?e.instant(n):n}};return n}]).run(["$rootScope","$state","$stateParams",function(e){e.$on("$stateChangeError",function(){})}]),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){e.toggleChannel("video",o.feed)}function t(){return o.feed&&(!o.feed.getVideoEnabled()||!o.feed.getCameraEnable())}function i(){return o.feed&&o.feed.getVideoEnabled()}var o=this;o.toggle=n,o.showsEnable=t,o.showsDisable=i}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-video-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhVideoButton",e),e.$inject=["RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(){function t(){a&&a.isConnected()||(a=n.findMain()),clearTimeout(r),r=setTimeout(function(){e.toggleChannel("video",a)},10)}function i(){return a&&a.isConnected()||(a=n.findMain()),a&&a.isPublisher&&!a.getVideoEnabled()}function o(){return a&&a.isConnected()||(a=n.findMain()),a&&a.isPublisher&&a.getVideoEnabled()}var s=this;s.toggle=t,s.showsEnable=i,s.showsDisable=o;var a=n.findMain(),r=null}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-video-button-main.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:t}}angular.module("janusHangouts").directive("jhVideoButtonMain",e),e.$inject=["RoomService","FeedsService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){e.unPublishFeed(i.feed.id)}function t(){return i.feed.isPublisher&&i.feed.isLocalScreen}var i=this;i.click=n,i.isVisible=t}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-unpublish-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhUnpublishButton",e),e.$inject=["RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(){function e(){i.clickFn()}function n(){return!i.sticky&&!i.feed.isIgnored}function t(){return i.sticky}var i=this;i.click=e,i.showsEnable=n,i.showsDisable=t}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-sticky-button.html",scope:{feed:"=",clickFn:"&",highlighted:"=",sticky:"="},controllerAs:"vm",bindToController:!0,controller:e}}angular.module("janusHangouts").directive("jhStickyButton",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){return!s.feed.isPublisher&&!s.feed.isIgnored}function t(){return s.feed.isIgnored}function i(){e.ignoreFeed(s.feed.id)}function o(){e.stopIgnoringFeed(s.feed.id)}var s=this;s.ignore=i,s.stopIgnoring=o,s.showsIgnore=n,s.showsStopIgnoring=t}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-ignore-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhIgnoreButton",e),e.$inject=["RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){return!s.feed.isPublisher&&!s.feed.isIgnored}function t(){return s.feed.isIgnored}function i(){e.ignoreFeed(s.feed.id)}function o(){e.stopIgnoringFeed(s.feed.id)}var s=this;s.ignore=i,s.stopIgnoring=o,s.showsIgnore=n,s.showsStopIgnoring=t}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-ignore-button-text.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhIgnoreButtonText",e),e.$inject=["RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(n){e.toggleChannel("audio",a),n.stopPropagation(),n.preventDefault()}function t(){return a&&!a.getAudioEnabled()}function i(){return a&&!a.isIgnored&&a.getAudioEnabled()}function o(){return a&&!a.isPublisher&&!a.isIgnored&&!a.getAudioEnabled()}var s=this,a=s.feed;s.toggle=n,s.showsEnable=t,s.showsDisable=i,s.showsAudioOff=o}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-audio-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhAudioButton",e),e.$inject=["RoomService","FeedsService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(){function t(){r&&r.isConnected()||(r=n.findMain()),clearTimeout(l),l=setTimeout(function(){e.toggleChannel("audio",r)},10)}function i(){return r&&r.isConnected()||(r=n.findMain()),r&&r.isPublisher&&!r.isLocalScreen&&!r.getAudioEnabled()}function o(){return r&&r.isConnected()||(r=n.findMain()),r&&!r.isIgnored&&r.getAudioEnabled()}function s(){return r&&r.isConnected()||(r=n.findMain()),r&&!r.isPublisher&&!r.isIgnored&&!r.getAudioEnabled()}var a=this,r=n.findMain();a.toggle=t,a.showsEnable=i,a.showsDisable=o,a.showsAudioOff=s;var l=null}return{restrict:"EA",templateUrl:"app/components/feed/buttons/jh-audio-button-main.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:t}}angular.module("janusHangouts").directive("jhAudioButtonMain",e),e.$inject=["RoomService","FeedsService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o){function s(e,n){e.$watch(function(){return $("#thumbnails .thumb",n).size()},function(){e.vm.adjustFeedsSizes()})}function a(){function e(){_.show=!0,clearTimeout(k),k=setTimeout(function(){_.show=!1},6e3)}function s(){_.isChatShow=!_.isChatShow}function a(){var e=_.shareScreenFeed();return e?_.show:!0}function r(){_.isChatShow=!1}function l(){return t.allFeeds()}function c(){var e=_.highlight.current,n=e;!e||e.isConnected()&&!e.isPublisher||(e.isPublisher||(n=null),e=null),_.highlight.byUser&&!_.highlight.byUser.isConnected()&&(_.highlight.byUser=null);var i=null,s=null;return null!==_.highlight.byUser&&t.find(_.highlight.byUser.id)?_.highlight.current=_.highlight.byUser:(i=_.speakingFeed(),s=t.getCurrentClickedFeed(),_.highlight.current=e&&e.getSpeaking()?s||_.shareScreenFeed()||e:s||_.shareScreenFeed()||i||e||u()||t.findMain()),n!=_.highlight.current&&(i==_.highlight.current&&o.sendSingnal(_.highlight.current).then(function(){return _.highlight.current}),o.sendSingnal(_.highlight.current)),_.highlight.current}function u(){for(var e=t.allFeeds()||[],n=0;n<e.length;n++){var i=e[n];if(!i.isPublisher)return i}return t.findMain()}function d(){var e=t.speakingFeed(),n=null;return e&&e.getVideoEnabled()&&!e.isPublisher?e:n}function h(){var e=t.shareScreenFeeds();return e&&e.length&&e[0]}function g(){var e=_.highlightedFeed();return e?e.isPublisher&&!e.isLocalScreen:!1}function m(e){_.highlight.byUser=_.highlight.byUser!==e?e:null}function p(e){return e===_.highlight.current}function v(e){return e===_.highlight.byUser}function f(){return t.findMain()}function b(){return n.allEntries()}function w(){var e=t.findMain();i.showSettingDlgFW(e).then(function(e){if(e){console.log("constraints "+JSON.stringify(e));var n=t.findMain();window.localStorage.settedConfig=JSON.stringify(e.config),n&&n.connection.setting(e.config);var i=t.findSmallFeed();i?i.connection.setting(e.config):console.log("setting configure -- no small feed publish")}})}function S(){var e=$("#thumbnails"),n=158;$(".face",e).css({height:.75*n+"px",width:n+"px"})}var _=this,y=$(window).height();$("#jh-chat-messages").css({height:y-156+"px"}),_.highlight={byUser:null,current:null},_.feeds=l,_.highlightedFeed=c,_.mirrored=g,_.toggleHighlightedFeed=m,_.isHighlighted=p,_.isHighlightedByUser=v,_.logEntries=b,_.adjustFeedsSizes=S,_.localFeed=f,_.showHide=r,_.shareScreenFeed=h,_.toggleChatFn=s,_.isChatShow=!1,_.mousemv=e,_.show=!1,_.showFeeds=a,_.speakingFeed=d,_.showSettingDlg=w,_.hideSetting=!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices,n.setVmScope(_);var k=null}angular.element(e);return{restrict:"EA",templateUrl:"app/components/videochat/jh-video-chat-v1.html",scope:{},controllerAs:"vm",bindToController:!0,link:s,controller:a}}angular.module("janusHangouts").directive("jhVideoChatV1",e),e.$inject=["$window","LogService","FeedsService","DialogService","DataChannelService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(){function t(){n(function(){e.videoThumbnails=!e.videoThumbnails})}function i(){return e.videoThumbnails}var o=this;o.click=t,o.isChecked=i}return{restrict:"EA",templateUrl:"app/components/videochat/jh-thumbnails-mode-button.html",scope:{},controllerAs:"vm",bindToController:!0,controller:t}}angular.module("janusHangouts").directive("jhThumbnailsModeButton",e),e.$inject=["jhConfig","$timeout"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i){this.user={username:"visitor"},this.signin=function(n){var t=e.defer();return this.user={username:n},t.resolve(this.user),t.promise},this.getCurrentUserRoom=function(n,t,o){var s=e.defer();return i.get(window.AJAXURLPRE+"/webvc/meetingInfo",{params:{meetingid:n,clientIp:t,clientType:o||"browser"}}).then(function(e){var n=e.data;n.success?s.resolve(n.data):s.reject(n.message)},function(){s.reject()}),s.promise},this.meetingInvite=function(n,t,o){var s=e.defer();return i.post(window.AJAXURLPRE+"/webvc/meetingInvite",{meetingid:n,emails:t,members:o}).then(function(e){var n=e.data;n.success?s.resolve():s.reject(n.message)},function(){s.reject()}),s.promise},this.callback=function(e){return e},this.tt=null,this.finduser=function(n){clearTimeout(this.tt);var t=e.defer();return this.tt=setTimeout(function(){var e="https://alimeeting.alibaba-inc.com/alimeeting/web";i.jsonp(e+"/room/finduser?callback=JSON_CALLBACK",{params:{email:!0,keyword:n}}).then(function(e){var n=e.data;t.resolve((n.resultset||{}).docset)},function(){t.reject()})},200),t.promise},this.currentUser=function(){var n=e.defer();return null!==this.user?(t.$broadcast("user.set",this.user),n.resolve(this.user)):n.reject("Not signed in"),n.promise},this.signout=function(i){var o=e.defer();this.user=null,o.resolve(),t.$broadcast("user.unset");for(var s in Janus.sessions)null!==Janus.sessions[s]&&void 0!==Janus.sessions[s]&&Janus.sessions[s].destroyOnUnload&&Janus.sessions[s].destroy();return i||n.go("signin"),o.promise}}angular.module("janusHangouts").service("UserService",e),e.$inject=["$q","$state","$rootScope","$http"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(e){e.$on("user.set",function(n,t){e.vm.user=t}),e.$on("user.unset",function(){e.vm.user=null})}function i(){function t(){n.showLoginOutDlg().then(function(){e.signout()})}var i=this;i.user=null,i.signout=t}return{restrict:"EA",templateUrl:"app/components/user/jh-user-panel.html",scope:!0,link:t,controller:i,controllerAs:"vm"}}angular.module("janusHangouts").directive("jhUserPanel",e),e.$inject=["UserService","DialogService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(e,n){setTimeout(function(){$("#inputUsername",n).focus()},100)}function t(){function n(){t.room&&t.username&&e.path("/"+t.username+"/"+t.room.id).search({key:"test"})}var t=this;t.username=null,t.room=null,t.signin=n,t.feedbackurl="zh-cn"==window.localStorage.lang?"http://wj.wf.taobao.org/answerQnaire.htm?qnaireUid=d094ae2e-2bd0-449a-ba1a-a47f0bf06d5e":"https://work.alibaba-inc.com/work/group/groupDetail?groupId=18521",t.feedbackurl="external"==window.localStorage.app?"https://www.wenjuan.com/s/YJva2i/":t.feedbackurl}return{restrict:"EA",templateUrl:"app/components/user/jh-signin-form.html",scope:!0,link:n,controllerAs:"vm",bindToController:!0,controller:t}}angular.module("janusHangouts").directive("jhSigninForm",e),e.$inject=["$location"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t){function i(n){var t=this;e(function(){t.inProgress=n})}function o(){return this.inProgress}function s(){return"https:"===window.location.protocol}function a(){return t.httpsAvailable?t.httpsUrl?t.httpsUrl:"https://"+window.location.hostname+window.location.pathname:null}function r(){n.open({animation:!0,templateUrl:"app/components/screen-share/screen-share-help.html",controller:"ScreenShareHelpCtrl",controllerAs:"vm"})}this.inProgress=!1,this.setInProgress=i,this.getInProgress=o,this.showHelp=r,this.usingSSL=s,this.httpsUrl=a}angular.module("janusHangouts").service("ScreenShareService",e),e.$inject=["$timeout","$modal","jhConfig"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){e.dismiss("cancel")}function t(){return window.location.hostname}var i=this;i.close=n,i.hostname=t}angular.module("janusHangouts").controller("ScreenShareHelpCtrl",e),e.$inject=["$modalInstance"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){return t.usingSSL()||t.httpsUrl()}var t=this;t.showHelp=function(){e.showHelp()},t.usingSSL=function(){return e.usingSSL()},t.httpsUrl=function(){return e.httpsUrl()},t.visible=n}return{restrict:"EA",templateUrl:"app/components/screen-share/jh-screen-share-hint.html",scope:!0,controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhScreenShareHint",e),e.$inject=["ScreenShareService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i){function o(){function o(){clearTimeout(c),c=setTimeout(function(){l.enabled()&&n.publishScreen()},10)}function s(){return!l.screenSharing()&&e.usingSSL()&&!e.getInProgress()}function a(){return t.shareScreenFeedsNew().length}function r(){return i.T(l.screenSharing()?"shareLimitTip":l.enabled()?"shareTip":e.getInProgress()?"waitShareTip":"shareDisableTip")}var l=this;l.click=o,l.enabled=s,l.title=r,l.screenSharing=a;var c=null}return{restrict:"EA",templateUrl:"app/components/screen-share/jh-screen-share-button.html",scope:!0,controllerAs:"vm",bindToController:!0,controller:o}}angular.module("janusHangouts").directive("jhScreenShareButton",e),e.$inject=["ScreenShareService","RoomService","FeedsService","T"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){return function(e){e=e||{},_.assign(this,e),this.id=this.room,this.label=this.description+" ("+this.num_participants+"/"+this.max_publishers+" users)"}}angular.module("janusHangouts").factory("Room",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s,a,r,l,c,u,d,h,g){function m(){var e,n;return"https:"===window.location.protocol?(e="wss:",n="8989"):(e="ws:",n="8188"),[e+"//"+window.location.hostname+":"+n+"/janus/",window.location.protocol+"//"+window.location.hostname+"/janus/"]}function p(){var n=e.defer();return Janus.init({debug:l.janusDebug}),this.janus=new Janus({server:this.server,token:this.token,iceServers:this.iceServers,turnIp:this.turnIp,useRelay:this.useRelay,success:function(){n.resolve()},error:function(e){n.reject();var t="Janus error: "+e;console.error(t),clearTimeout(A),A=setTimeout(function(){var e=urlSearch(location.search).debug;e||window.location.reload()},5e3)},destroyed:function(){console.log("Janus object destroyed")}}),n.promise}function v(e,t,o,l){var c=e;this.username=e,e=g.encode(e);var m=this,p=n;this.connection=null,this.janus.attach({plugin:"janus.plugin.videoroom",success:function(n){m.connection=new s(n,m.room.id,"main"),t?m.connection.register(e,!0,o):m.connection.register(e,null,o)},error:function(e){console.error("Error attaching plugin... "+e)},consentDialog:function(){},ondataopen:function(){m.connection.onDataOpen(),E()},ondata:function(e){console.log(" ::: Got info in the data channel (subscriber) :::"),a.receiveMessage(e)},onlocalstream:function(e){var n=i.findMain();n.setStream(e)},onIceError:function(){var e=i.findMain(),n=m.connection.getConfig();console.log("config ENTER+++++++++++++++++"+JSON.stringify(n)),e.disconnect(),i.destroy(e.id),x.enter(c,null,!0,n)},oncleanup:function(){if(console.log("that.connection.needRepublish:"+m.connection.needRepublish),console.log(JSON.stringify(m.connection.constraints)),m.connection.needRepublish){console.log("republish"),m.connection.needRepublish=!1;var e=m.connection.getConfig()||{};m.connection.publish({config:e,error:function(e){console.log(e+"{noCamera: true}"),m.connection.publish({noCamera:!0}),u.showSettingErrorDlg(),h.signout(!0)}},m.connection.constraints)}else console.log("do not need republish");console.log(" ::: Got a cleanup notification: we are unpublished now :::")},onmessage:function(n,t){var i=n.videoroom;if(console.log("Event: "+i),console.log("MSG: "+JSON.stringify(n)),"joined"===i)console.log(JSON.stringify(n)+"11111111111______small________"),r.enterRoom(n.id,e,m.connection),l=l||{},m.connection.publish({config:l,error:function(){console.log(" that.connection.publish({noCamera: true});//TODO"),m.connection.publish({noCamera:!0}),u.showSettingErrorDlg(),h.signout(!0)}}),n.publishers instanceof Array&&n.publishers.length>0&&m.subscribeToFeeds(n.publishers,m.room.id);else if("slow_link"===i);else if("destroyed"===i)console.log("The room has been destroyed!"),p.$broadcast("room.destroy");else if("event"===i)if(432==n.error_code&&(u.showErroHint(d.T("room_full")),h.signout(!0)),console.log("################publisher#################"),console.log(JSON.stringify(n.publishers)),n.publishers instanceof Array&&n.publishers.length>0)m.subscribeToFeeds(n.publishers,m.room.id);else if(void 0!==n.leaving&&null!==n.leaving){var o=n.leaving;r.destroyFeed(o)}else if(void 0!==n.unpublished&&null!==n.unpublished){var s=n.unpublished;r.destroyFeed(s)}else n.configured?m.connection.confirmConfig():void 0!==n.error&&null!==n.error?(console.log("Error message from server"+n.error),p.$broadcast("room.error",n.error)):"ok"===n.unpublished;void 0!==t&&null!==t&&m.connection.handleRemoteJsep(t)}})}function f(){r.leaveRoom()}function b(n,t){t=g.encode(t);var i=e.defer();return this.janus.attach({plugin:"janus.plugin.videoroom",success:function(e){var o=isDebug?window.uuid:window.localStorage.uuid,s={request:"join",room:n,ptype:"publisher",display:t,isInner:!0,participant:o};e.send({message:s,success:function(){e.detach(),i.resolve()}})}}),i.promise}function w(e){this.room=e}function S(e){console.log("#####################"+e.length+" "+x.isSmallFeedPublished),e.length>1&&!x.isSmallFeedPublished&&(x.isSmallFeedPublished=!0,x.publishSmallFeed(x.username));for(var n=0;n<e.length;n++){var t=e[n].id,o=e[n].display;console.log("  >> ["+t+"] "+o);var s=i.find(t);(null===s||s.waitingForConnection())&&this.subscribeToFeed(t,o)}}function _(e,n){var o=this,c=i.find(e),u=null;c&&(n=c.display),this.janus.attach({plugin:"janus.plugin.videoroom",success:function(t){u=new s(t,o.room.id,"subscriber"),u.listen(e,n)},error:function(e){console.error("  -- Error attaching plugin... "+e)},onmessage:function(o,s){console.log(" ::: Got a message (listener) :::");var a=o.videoroom;console.log("Event: "+a),"attached"===a?(console.log(JSON.stringify(o)),t(function(){if(c)r.stopIgnoringFeed(e,u);else{var t=i.allFeeds();console.log("#####################__________"+t.length+" "+x.isSmallFeedPublished),t.length>1&&!x.isSmallFeedPublished&&(x.isSmallFeedPublished=!0,x.publishSmallFeed(x.username)),r.remoteJoin(e,n,u)}})):"slow_link"===a||(o.configured?u.confirmConfig():o.started?u.setConfig({values:{audio:!0,video:l.videoThumbnails}}):console.log("What has just happened?!")),void 0!==s&&null!==s&&u.subscribe(s)},onIceError:function(){console.log("onIceError");var t=u.getConfig();console.log("Subscribe config+++++++++++++++++"+JSON.stringify(t));var o=i.find(e);o?(o.disconnect(),i.destroy(o.id)):console.log("feed is null !!!"),x.subscribeToFeed(e,n,t)},onremotestream:function(n){i.waitFor(e).then(function(e){e.setStream(n)},function(e){console.error(e)})},ondataopen:function(){console.log("The subscriber DataChannel is available"),u.onDataOpen(),E()},ondata:function(n){console.log(" ::: Got info in the data channel (subscriber) :::"),a.receiveMessage(n,e)},oncleanup:function(){console.log(" ::: Got a cleanup notification (remote feed "+e+") :::")}})}function y(e){if(!Janus.isExtensionEnabled())return void u.showInstallPlugin();var n,t,o=i.findMain().display,a=this;this.janus.attach({plugin:"janus.plugin.videoroom",success:function(t){n=new s(t,a.room.id,"Screen");var i=g.encode(o+"_screen");n.registerScreen(i,e),c.setInProgress(!0)},error:function(e){console.error("  -- Error attaching screen plugin... "+e)},onlocalstream:function(e){console.log(" ::: Got the screen stream :::");var n=i.find(t);n.setStream(e,!0),e.getVideoTracks()[0].onended=function(){j(t),c.setInProgress(!1)}},onIceError:function(){console.log("onIceError publish screen"),x.publishScreen(!0)},oncleanup:function(){},onmessage:function(e,i){console.log(" ::: Got a message (screen) :::");var s=e.videoroom;if("joined"===s){t=e.id;var a=g.encode(o+"_screen");r.publishScreen(t,a,n,!0),n.publish({success:function(){c.setInProgress(!1)},error:function(e){console.log(e),j(t),c.setInProgress(!1)}})}else e.configured?n.confirmConfig():console.log("Unexpected event for screen");void 0!==i&&null!==i&&n.handleRemoteJsep(i)}})}function k(){var e,n,t=i.findMain().display,o=this;console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!publishSmallFEED"+t),this.janus.attach({plugin:"janus.plugin.videoroom",success:function(n){e=new s(n,o.room.id,"small");var i=g.encode(t+"__small__");e.register(i,!0)},error:function(e){console.error("  -- Error attaching small screen... "+e)},onlocalstream:function(e){console.log(" ::: Got the screen stream :::");var t=i.find(n);t.setStream(e,!0)},onIceError:function(){console.log("_________________onIceError PublishSmallFeed _______________________");var n=e.getConfig();console.log("++++++++++++++++++++++++++++++++++++++error  Publish SmallFeed+++++++++++++++++"+JSON.stringify(n)),x.publishSmallFeed()},onmessage:function(i,o){console.log(" ::: Got a message (Small screen) :::");var s=i.videoroom;if("joined"===s){n=i.id;var a=g.encode(t+"__small__");console.log(JSON.stringify(i)+"______small________"),r.publishSmallFeed(n,a,e),e.publish({success:function(){},error:function(e){console.log(e)}})}else console.log("Unexpected event for small video"+JSON.stringify(s));void 0!==o&&null!==o&&e.handleRemoteJsep(o)}})}function j(e){r.destroyFeed(e)}function C(e){r.ignoreFeed(e)}function I(e){this.subscribeToFeed(e)}function F(e,n){r.toggleChannel(e,n)}function E(){i.publisherFeeds().forEach(function(e){a.sendStatus(e,{exclude:"picture"}),t(function(){a.sendStatus(e)},4e3)})}function $(e,n){if(n=n?n:(window.localStorage.settedConfig||{}).output,"undefined"!=typeof e.sinkId){if("undefined"==typeof n||e.sinkId==n)return;e.setSinkId(n).then(function(){console.log("Success, audio output device attached: "+n)})["catch"](function(e){var n=e;"SecurityError"===e.name&&(n="You need to use HTTPS for selecting audio output device: "+e),console.error(n)})}else console.warn("Browser does not support output device selection.")}this.connect=p,this.enter=v,this.leave=f,this.setRoom=w,this.publishScreen=y,this.unPublishFeed=j,this.ignoreFeed=C,this.stopIgnoringFeed=I,this.subscribeToFeeds=S,this.subscribeToFeed=_,this.toggleChannel=F,this.joinRoom=b,this.room=null,this.janus=null,this.connection=null,this.publishSmallFeed=k,this.attachSinkId=$,this.isSmallFeedPublished=!1,this.username="",this.useRelay=!1;var x=this;this.server=l.janusServer?l.janusServer:m(),this.token=l.token,this.iceServers=l.iceServers,l.janusServerSSL&&"https:"===window.location.protocol&&(this.server=l.janusServerSSL);var A=null}angular.module("janusHangouts").service("RoomService",e),e.$inject=["$q","$rootScope","$timeout","FeedsService","Room","FeedConnection","DataChannelService","ActionService","jhConfig","ScreenShareService","DialogService","T","UserService","base64"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(e){this.vmScope=e}function t(n){var t=this;this.vmScope.isChatShow=!0,e(function(){t.entries.push(n)})}function i(){return this.entries}this.entries=[],this.add=t,this.allEntries=i,this.setVmScope=n,this.vmScope={}}angular.module("janusHangouts").service("LogService",e),e.$inject=["$timeout"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){return function(t,i){this.type=t,this.timestamp=new Date,this.content=i||{},this.text=function(){return this?this[this.type+"Text"]():""},this.unmuteRequestText=function(){var e;return e=this.content.source.isPublisher?n.T("unmute_tip"):this.content.source.getDisplayName()+n.T("unmuted_tip"),e+=this.content.target.isPublisher?n.T("you"):this.content.target.getDisplayName()},this.muteRequestText=function(){var e;return e=this.content.source.isPublisher?n.T("mute_tip"):this.content.source.getDisplayName()+n.T("muted_tip"),e+=this.content.target.isPublisher?n.T("you"):this.content.target.getDisplayName()},this.chatMsgText=function(){return e(this.content.text).trim()},this.publishScreenText=function(){return n.T("screenshare_start")},this.destroyFeedText=function(){return this.content.feed.isLocalScreen?n.T("screenshare_stop"):this.content.feed.getDisplayName()+n.T("left_tip")},this.newRemoteFeedText=function(){return this.content.feed.getDisplayName()+n.T("join_tip")},this.hasText=function(){return""!==this.text()}}}angular.module("janusHangouts").factory("LogEntry",["$sanitize","T",e])}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s){function a(s){var a,r,l=JSON.parse(s),c=l.type,u=l.content;if("chatMsg"===c)r=new n("chatMsg",{feed:e.find(u.source),text:u.text}),r.hasText()&&t.add(r);else if("muteRequest"===c){a=e.find(u.target);var d=e.find(u.source);a.isPublisher&&a.setEnabledChannel("audio",!1,d,{after:function(){i.$broadcast("muted.byRequest")}}),r=new n("muteRequest",{source:d,target:a}),t.add(r)}else if("unmuteRequest"===c){a=e.find(u.target);var d=e.find(u.source);a.isPublisher&&a.setEnabledChannel("audio",!0,d,{after:function(){i.$broadcast("unmuted.byRequest")}}),r=new n("unmuteRequest",{source:d,target:a}),t.add(r)}else"statusUpdate"===c?(a=e.find(u.source),a&&!a.isPublisher&&a.setStatus(u.status)):"kickOutRequest"==c?(a=e.find(u.target),a.isPublisher&&o.signout()):"signal"==c?(console.log("signal message++++++++"),console.log(JSON.stringify(l))):console.log("Unknown data type: "+c)}function r(e){var n={target:e.id};g("kickOutRequest",n)}function l(e,n){var t={target:e.id,source:n.id};g("muteRequest",t)}function c(e,n){var t={target:e.id,source:n.id};g("unmuteRequest",t)}function u(e,n){var t={source:e.id,status:e.getStatus(n)};g("statusUpdate",t)}function d(e){var n=s.defer(),t={cmd:"hd_video",feed_id:e.id};return g("signal",t),setTimeout(function(){console.log("singnla message result"),n.resolve()},2e3),n.promise}function h(e,n){var t={source:n.id,text:e};g("chatMsg",t)}function g(n,t){var i=JSON.stringify({type:n,content:t}),o=e.findMain();if(null!==o){if(!o.isDataOpen())return void console.log("Data channel not open yet. Skipping");var s=o.connection;s.sendData({text:i,error:function(e){console.log(e)},success:function(){console.log("Data sent: "+n)}})}}this.sendStatus=u,this.sendMuteRequest=l,this.sendChatMessage=h,this.receiveMessage=a,this.sendUnmuteRequest=c,this.sendKickOutReqest=r,this.sendSingnal=d}angular.module("janusHangouts").service("DataChannelService",e),e.$inject=["FeedsService","LogEntry","LogService","$rootScope","UserService","$q"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s,a){function r(e,i,o){var s=new n({display:i,connection:o,id:e,isPublisher:!0});t.add(s,{main:!0})}function l(e,i,o){var s=new n({display:i,connection:o,id:e,isPublisher:!0,isSmallFeed:!0});t.add(s)}function c(){var e=this;_.forEach(t.allFeeds(),function(n){e.destroyFeed(n.id)})}function u(e,s,a,r){var l=new n({display:s,connection:a,id:e,isPublisher:!0,isLocalScreen:!0,isShareScreen:r});t.add(l);var c=new i("publishScreen");o.add(c)}function d(e,s,a){var r=new n({display:s,connection:a,id:e,isPublisher:!1});t.add(r);var l=new i("newRemoteFeed",{feed:r});o.add(l)}function h(n){var s=t.find(n);if(null!==s){e(function(){s.disconnect(),t.destroy(n)});var a=new i("destroyFeed",{feed:s});o.add(a)}}function g(e){var n=t.find(e);if(null!==n){n.ignore();var s=new i("ignoreFeed",{feed:n});o.add(s)}}function m(e,n){var s=t.find(e);if(null!==s){s.stopIgnoring(n);var a=new i("stopIgnoringFeed",{feed:s});o.add(a)}}function p(e){var n=t.findMain(),a=new i("chatMsg",{feed:n,text:e});a.hasText()&&(o.add(a),s.sendChatMessage(e,n))}function v(e,n){var s=t.findMain();if(n||(n=t.findMain())){if(!n.isPublisher){if(n.isEnabled(e))var r=new i("muteRequest",{source:s,target:n});else var r=new i("unmuteRequest",{source:s,target:n});o.add(r)}if(n.isEnabled(e)){var l=null;"audio"===e&&n.isPublisher&&(l=function(){a.$broadcast("muted.byUser")}),n.setEnabledChannel(e,!1,s,{after:l})}else n.setEnabledChannel(e,!0,s)}}function f(e){e&&e.isConnected()&&s.sendKickOutReqest(e)}this.enterRoom=r,this.leaveRoom=c,this.remoteJoin=d,this.destroyFeed=h,this.ignoreFeed=g,this.stopIgnoringFeed=m,this.writeChatMessage=p,this.publishScreen=u,this.publishSmallFeed=l,this.toggleChannel=v,this.kickOut=f}angular.module("janusHangouts").service("ActionService",e),e.$inject=["$timeout","Feed","FeedsService","LogEntry","LogService","DataChannelService","$rootScope"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){e.showHelp()}var t=this;t.click=n}return{restrict:"EA",templateUrl:"app/components/invite-people/jh-invite-panel.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhInvitePanel",e),e.$inject=["InvitePeopleService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){e.showHelp()}var t=this;t.click=n}return{restrict:"EA",templateUrl:"app/components/invite-people/jh-invite-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhInviteButton",e),e.$inject=["InvitePeopleService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(e){s.inviteUrl=e}function t(e){s.userData=e}function i(e){s.user=e}function o(){e.open({animation:!0,templateUrl:"app/components/invite-people/invite-people-dialog.html",controller:"InvitePeopleDialogCtrl",controllerAs:"vm",resolve:{inviteurl:function(){return s.inviteUrl},userData:function(){return s.userData},user:function(){return s.user}}})}var s=this;this.showHelp=o,this.setInvitelUrl=n,this.setUserData=t,this.setUser=i,s.inviteUrl="",s.userData={}}angular.module("janusHangouts").service("InvitePeopleService",e),e.$inject=["$modal"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s){function a(e){e=(e||"").trim();for(var n=0;n<_.emails.length;n++)if(_.emails[n]==e)return _.emails.splice(n,1),void _.rmUsers(e)}function r(e,n){if(e=(e||"").trim(),e.length){for(var t=0;t<_.emails.length;t++)if(_.emails[t]==e)return;_.emails.push(e);var i={};n?(n=JSON.parse(n),i={userId:n.emplid,empId:n.workid,nickName:n.chinese_nickname||n.name,email:e}):i={userId:-1,empId:"",nickName:"",email:e},_.addUsers(i)}}function l(e){_.selectUsers.push(e)}function c(e){for(var n=0;n<_.selectUsers.length;n++)if(_.selectUsers[n].email==e)return void _.selectUsers.splice(n,1)}function u(){e.dismiss("cancel")}function d(e){13==e.keyCode&&(h(_.currentEmail)?(_.showerrmsg=!1,r((_.currentEmail||"").trim()),_.currentEmail="",_.users=[]):_.showerrmsg=!0)}function h(e){e=(e||"").toLowerCase();var n=/[a-z0-9-]{1,30}@[a-z0-9-]{1,65}.[a-z]{3}/;return n.test(e)}function g(){if(!_.emails.length){if(!h(_.currentEmail))return void(_.showerrmsg=!0);_.showerrmsg=!1,r((_.currentEmail||"").trim()),_.currentEmail=""}s.meetingInvite(i,_.emails.join(","),_.selectUsers),this.close()}function m(){angular.element("#link_input").select(),setTimeout(function(){document.execCommand("copy")},0)}function p(){return window.location.hostname}function v(){o&&o.trim().length&&_.currentEmail.length&&f(_.currentEmail)}function f(e){s.finduser(e).then(function(e){_.users=e})}function b(e){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),r(e.target.dataset.email,e.target.dataset.user),_.users=[],_.currentEmail=""}function w(){_.users=[]}function S(e){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}var _=this;_.close=u,_.invite=g,_.copy=m,_.link=t,_.emails=[],_.currentEmail="",_.showerrmsg=!1,_.rmEmail=a,_.keyup=d,_.changeUser=v,_.selectUsers=[],_.clearUser=w,_.clickPrevent=S,_.hostname=p,_.searchUser=f,_.users=null,_.selectUser=b,_.addUsers=l,_.rmUsers=c}angular.module("janusHangouts").controller("InvitePeopleDialogCtrl",e),e.$inject=["$modalInstance","InvitePeopleService","inviteurl","userData","user","UserService","$scope"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(){function e(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function n(){var e=i.docElm;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()}function t(){return document.webkitIsFullScreen}var i=this;i.isFullscreen=t,i.requestFullscreen=n,i.exitFullscreen=e,i.docElm=document.documentElement}return{restrict:"EA",templateUrl:"app/components/fullscreen/jh-fullscreen-button.html",scope:{feed:"="},controllerAs:"vm",bindToController:!0,controller:e}}angular.module("janusHangouts").directive("jhFullscreenButton",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){this.version=e.version}return{restrict:"EA",templateUrl:"app/components/footer/jh-footer.html",scope:!0,controller:n,controllerAs:"vm"}}angular.module("janusHangouts").directive("jhFooter",e),e.$inject=["jhConfig"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){return function(n,t){function i(){var e,n=o();n&&!h?(e=_.sum(_.slice(g,g.length-7)),e>=4&&(h=!0,t.start&&t.start())):!n&&h&&(e=_.sum(g),0===e&&(h=!1,t.stop&&t.stop())),g.shift(),g.push(0+n)}function o(){c.getFloatFrequencyData(u);for(var e=4,n=u.length;n>e;e++)if(u[e]>a&&u[e]<0)return!0;return!1}t=t||{};var s=t.interval||65,a=t.threshold||-50,r=window.AudioContext||window.webkitAudioContext,l=new r,c=l.createAnalyser();c.fftSize=512,c.smoothingTimeConstant=.1;var u=new window.Float32Array(c.fftSize),d=l.createMediaStreamSource(n);d.connect(c);var h=!1,g=(_.fill(new Array(10),0),_.fill(new Array(15),0)),m=e(function(){"suspended"===l.state?l.resume():i()},s);this.destroy=function(){e.cancel(m),l.close()},this.isSpeaking=function(){return h}}}angular.module("janusHangouts").factory("SpeakObserver",e),e.$inject=["$interval"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){var e=function(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var n=this;this.script.onaudioprocess=function(e){var t,i=e.inputBuffer.getChannelData(0),o=0,s=0;for(t=0;t<i.length;++t)o+=i[t]*i[t],Math.abs(i[t])>.99&&(s+=1);n.instant=Math.sqrt(o/i.length),n.slow=.95*n.slow+.05*n.instant,n.clip=s/i.length}};return e.prototype.connectToSource=function(e){console.log("SoundMeter connecting"),this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination)},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e}angular.module("janusHangouts").factory("SoundMeter",e),e.$inject=["$interval"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(t,o){t.$watch("vm.feed.getStream()",function(e){if(void 0!==e){var t=$("video",o)[0];t.muted=!0,attachMediaStream(t,e),n.attachSinkId(t)}});var s=angular.element(e);s.unbind("resize"),s.bind("resize",function(){i()})}function i(){var e=$(window),n=e.width(),t=e.height();$("#jh-chat-messages").css({height:t-156+"px"}),$("body").css({overflow:"hidden"});var i=$("#main-video video"),o=i[0].videoWidth,s=i[0].videoHeight,a=n,r=t;i.length&&(i.css({"-webkit-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"}),o*e.height()>=s*e.width()?(a=e.width(),i.css({width:a})):(r=e.height(),i.css({height:r})))}function o(){i()}return{restrict:"EA",templateUrl:"app/components/feed/jh-mainscreen-feed.html",scope:{feed:"=",message:"@"},controllerAs:"vm",bindToController:!0,controller:o,link:t}}angular.module("janusHangouts").directive("jhMainScreenFeed",e),e.$inject=["$window","RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(t,o){t.$watch("vm.feed.getStream()",function(e){if(void 0!==e){var t=$("video",o)[0];t.muted=!0,attachMediaStream(t,e),n.attachSinkId(t)}});var s=angular.element(e);s.unbind("resize"),s.bind("resize",function(){i()})}function i(){var n=angular.element(e),t=(n.width(),n.height());$("#jh-chat-messages").css({height:t-156+"px"}),$("body").css({overflow:"hidden"});var i=$("#main-video video");i.length&&i.css({"-webkit-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"})}function o(){i()}return{restrict:"EA",templateUrl:"app/components/feed/jh-main-feed.html",scope:{feed:"=",message:"@"},controllerAs:"vm",bindToController:!0,controller:o,link:t}}angular.module("janusHangouts").directive("jhMainFeed",e),e.$inject=["$window","RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s){function a(i,o){function s(e){return Date.now()+1e3*e}function a(){return s(0)}function r(){var e=$("#thumbnails"),n=(e.innerWidth(),e.innerHeight(),158);$(".face",e).css({height:.75*n+"px",width:n+"px"})}i.$watch("vm.feed.getStream()",function(n){if(void 0!==n){var t=$("video",o)[0];t.muted=i.vm.feed.isPublisher,l.videoattached=!0,attachMediaStream(t,n),e.attachSinkId(t)}});var l=i.vm,c=l.feed;if(r(),c.isPublisher){if(l.initPics(o),l.takePic(),n(l.takePic,2e4),!c.isLocalScreen){var u=a();i.$on("muted.byRequest",function(){u=s(3)}),i.$on("unmuted.byRequest",function(){}),i.$on("muted.byUser",function(){u=a()})}}else c.setVideoSubscription(t.videoThumbnails||l.highlighted),i.$watch(function(){return t.videoThumbnails||l.highlighted||!l.feed.isSilent()},function(e){c.setVideoSubscription(e)})}function r(){function e(e){c.expanded=!c.expanded,e.stopPropagation(),e.preventDefault()}function n(e){var n=c.feed.getDisplayName();s.showKickoutDlg(n).then(function(){c.highlightedByUser&&c.toggleHighlightFn(null),o.kickOut(c.feed),e.stopPropagation(),e.preventDefault()})}function t(){c.feed.isShareScreen&&c.feed.isPublisher||i.setClickedFeed(c.feed)}function a(){return c.highlighted||c.feed.isIgnored?"video":c.feed.getVideoEnabled()?c.feed.isPublisher?"video":c.feed.getVideoSubscription()?"video":c.feed.getPicture()?"picture":"placeholder":"video"}function r(e){return}function l(){return}var c=this;c.mirrored=c.feed.isPublisher&&!c.feed.isLocalScreen,c.thumbnailTag=a,c.initPics=r,c.takePic=l,c.videoattached=!1,c.click=t,c.kickOut=n,c.toggleMenu=e,c.expanded=!1}return{restrict:"EA",templateUrl:"app/components/feed/jh-feed.html",scope:{feed:"=",toggleHighlightFn:"&",highlighted:"=",localfeed:"=",highlightedByUser:"="},controllerAs:"vm",bindToController:!0,controller:r,link:a}}angular.module("janusHangouts").directive("jhFeed",e),e.$inject=["RoomService","$interval","jhConfig","FeedsService","ActionService","DialogService","$window","DataChannelService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(e){return this.feeds[e]||null}function i(){return this.mainFeed}function o(){return _.detect(this.allFeeds(),function(e){return e.isSmallFeed})}function s(){return this.clickedFeeded?this.feeds[this.clickedFeeded.id]||null:null}function a(){return this.ClickFeedSetTime>Date.now()-f&&this.clickedFeeded?this.feeds[this.clickedFeeded.id]||null:null}function r(e){this.clickedFeeded=e,this.ClickFeedSetTime=Date.now()}function l(t,i,o){var s=e.defer(),a=this.find(t),r=this;if(i=i||10,o=o||1e3,null===a)var l=n.setInterval(function(){a=r.find(t),null===a?i-=1:(n.clearInterval(l),s.resolve(a)),0===i&&(n.clearInterval(l),s.reject("feed with id "+t+" was not found"))},o);else s.resolve(a);return s.promise}function c(e,n){this.feeds[e.id]=e,n&&n.main&&(this.mainFeed=e)}function u(e){delete this.feeds[e],this.mainFeed&&e===this.mainFeed.id&&(this.mainFeed=null)}function d(){return _.filter(this.feeds,function(e){return null!=e.stream&&!e.isSmallFeed})}function h(){return _.filter(this.allFeeds(),function(e){return e.isPublisher})}function g(){return _.filter(this.allFeeds(),function(e){return e.isLocalScreen})}function m(){var e=this;return _.filter(this.allFeeds(),function(n){var t=(n.id||"").toString().lastIndexOf("screen-");if(-1!=t){var i=n.id.substr(t+7);if(i!=e.mainFeed.id)return null!=n.stream;if(!n.isPublisher)return null!=n.stream}})}function p(){return _.filter(this.allFeeds(),function(e){return-1!=(e.id||"").toString().lastIndexOf("screen-")&&null!=e.stream})}function v(){return _.detect(this.allFeeds(),function(e){return e.getSpeaking()})}this.mainFeed=null,this.clickedFeeded=null,this.feeds={},window.feeds=this.feeds,this.find=t,this.findMain=i,this.findSmallFeed=o,this.add=c,this.destroy=u,this.allFeeds=d,this.publisherFeeds=h,this.localScreenFeeds=g,this.shareScreenFeeds=m,this.shareScreenFeedsNew=p,this.speakingFeed=v,this.waitFor=l,this.getClickedFeed=s,this.setClickedFeed=r,this.getCurrentClickedFeed=a,this.ClickFeedSetTime=Date.now();var f=2e3}angular.module("janusHangouts").service("FeedsService",e),e.$inject=["$q","$window"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i){return function(o){function s(t){e(function(){a.isEnabled("audio")===!1&&(t=!1),a.speaking!==t&&(a.speaking=t,t===!1&&(a.silentSince=Date.now()),n.sendStatus(a,{exclude:"picture"}))})}o=o||{};var a=this;this.id=o.id||0;try{a.display=i.decode(o.display)}catch(r){console.log(JSON.stringify(r)),this.display=o.display}this.outter=-1!=this.display.lastIndexOf("__outer__"),this.connection=o.connection||null,this.isPublisher=o.isPublisher||!1,this.isLocalScreen=o.isLocalScreen||!1,this.isIgnored=o.ignored||!1,this.isShareScreen=o.isShareScreen||!1,this.isClickScreen=o.isClickScreen||!1,this.isSmallFeed=o.isSmallFeed||!1,this.isShareScreen=-1!=(this.id||"").toString().lastIndexOf("screen-"),this.stream=null;var l=null;this.speaking=!1,this.speakingForShow=!1,this.silentSince=Date.now(),this.videoRemoteEnabled=!0,this.audioRemoteEnabled=!0;var c=null;this.speakObserver=null,this.getDisplayName=function(){var e=this.display.lastIndexOf("__outer__");return-1!=e?this.display.substr(0,e):this.display},this.setIsClickScreen=function(e){this.isClickScreen=e},this.isEnabled=function(e){return this.isPublisher?this.connection&&this.connection.getConfig()?this.connection.getConfig()[e]:null:"audio"===e?a.audioRemoteEnabled:a.videoRemoteEnabled},this.setPicture=function(e){l=e},this.getPicture=function(){return l},this.setStream=function(e,n){!this.isPublisher||this.isLocalVideo||n||(this.speakObserver&&this.speakObserver.destroy(),this.speakObserver=new t(e,{start:function(){s(!0)},stop:function(){s(!1)}})),c=e,this.stream=e},this.getStream=function(){return c},this.setSpeaking=function(e){this.speaking=e},this.getSpeaking=function(){return this.speaking},this.setSpeakingForShow=function(e){this.speakingForShow=e},this.getSpeakingForShow=function(){return a.speakingForShow},this.setAudioEnabled=function(e){this.audioRemoteEnabled=e},this.getAudioEnabled=function(){return this.isEnabled("audio")},this.setVideoEnabled=function(e){this.videoRemoteEnabled=e},this.getVideoEnabled=function(){return this.isEnabled("video")},this.getCameraEnable=function(){return this.stream.getVideoTracks()&&this.stream.getVideoTracks().length>0||!1},this.isVoiceDetected=function(){return a.speakObserver&&a.speakObserver.isSpeaking()},this.isDataOpen=function(){return this.connection?this.connection.isDataOpen:!1},this.isConnected=function(){return null!==this.connection},this.disconnect=function(){this.connection&&this.connection.destroy(),this.speakObserver&&this.speakObserver.destroy(),this.connection=null},this.ignore=function(){this.isIgnored=!0,this.disconnect()},this.stopIgnoring=function(e){this.isIgnored=!1,this.connection=e},this.waitingForConnection=function(){return this.isIgnored===!1&&!this.connection},this.setEnabledChannel=function(t,i,o,s){var a=this;if(s=s||{},this.isPublisher){var r={};r[t]=i,this.connection.setConfig({values:r,ok:function(){e(function(){"audio"===t&&i===!1&&(a.speaking=!1),s.after&&s.after(),n.sendStatus(a,{exclude:"picture"})})}}),"video"===t&&0==i?a.stream.getVideoTracks()[0].enabled=!1:"video"===t&&1==i&&(a.stream.getVideoTracks()[0].enabled=!0),"audio"===t&&0==i?a.stream.getAudioTracks()[0].enabled=!1:"audio"===t&&1==i&&(a.stream.getAudioTracks()[0].enabled=!0)}else"audio"===t&&i===!1?n.sendMuteRequest(this,o):"audio"===t&&i===!0&&n.sendUnmuteRequest(this,o)},this.updateLocalPic=function(t){var i=this;e(function(){l=t,n.sendStatus(i)})},this.getStatus=function(e){e=e||{},e.exclude||(e.exclude=[]);var n=["audioEnabled","videoEnabled","speaking","picture"],t={};return _.forEach(n,function(n){_.includes(e.exclude,n)||(t[n]=a["get"+_.capitalize(n)]())}),t},this.setStatus=function(n){var t=this;e(function(){t.speaking===!0&&n.speaking===!1&&(t.silentSince=Date.now()),_.forEach(n,function(e,n){t["set"+_.capitalize(n)](e)})})},this.isSilent=function(e){return e||(e=6e3),!a.speaking&&a.silentSince<Date.now()-e},this.setVideoSubscription=function(e){this.connection.setConfig({values:{video:e}})},this.getVideoSubscription=function(){return this.connection&&this.connection.getConfig()?this.connection.getConfig().video:null}}}angular.module("janusHangouts").factory("Feed",e),e.$inject=["$timeout","DataChannelService","SpeakObserver","base64"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){return function(n,t,i){var o=this;this.pluginHandle=n,this.role=i||"subscriber",this.isDataOpen=!1,this.config=null,this.bitrate=1024e3,this.downBitrateTime=Date.now(),this.needRepublish=!1;var s=1e4;console.log(this.role+" plugin attached ("+n.getPlugin()+", id="+n.getId()+")"),this.destroy=function(){this.config=null,this.pluginHandle.detach()},this.hangup=function(){},this.register=function(e,o,s){this.bitrate=o?56e3:512e3;var a=isDebug?window.uuid:window.localStorage.uuid,r={request:"joinandconfigure",room:t,ptype:"publisher",display:e,agent:window.navigator.userAgent,isreconnect:s,extrainfo:"test",mtype:i,participant:a,bitrate:this.bitrate};n.send({message:r})},this.setBitrate=function(e){var t={request:"configure",bitrate:e};n.send({message:t})};this.downBitrate=function(){Date.now()-s>=this.downBitrateTime&&(this.downBitrateTime=Date.now(),this.bitrate=3*this.bitrate/4,console.log("+++++++++++++++++++++++++++++down bitrate: "+this.bitrate+" time: "+Date.now()),this.setBitrate(this.bitrate))},this.registerScreen=function(e,o){var s=isDebug?window.uuid:window.localStorage.uuid,a={request:"join",room:t,ptype:"publisher",display:e,participant:s,mtype:i,agent:window.navigator.userAgent,isreconnect:o,bitrate:1024e3};n.send({message:a})},this.listen=function(e){var i=isDebug?window.uuid:window.localStorage.uuid,o={request:"join",room:t,ptype:"listener",feed:e,participant:i,agent:window.navigator.userAgent,isinnner:!0};n.send({message:o})},this.handleRemoteJsep=function(e){n.handleRemoteJsep({jsep:e})},this.sendData=function(e){n.data(e)},this.publish=function(t,i){t=t||{},i=i?i:window.localStorage.settedConfig?JSON.parse(window.localStorage.settedConfig):null;var s={videoRecv:!1,audioRecv:!1},a={video:!0,audio:!0};"main"===this.role?(s.audioSend=!0,s.data=!0,s.constraints=i):"small"===this.role?(a.audio=!1,s.audioSend=!1,s.video="small",s.data=!1,s.constraints=i):(a.audio=!1,s.video="screen",s.audioSend=!1,s.data=!1),_.assign(a,t.config),console.log("option.noCamera:"+t.noCamera+" cfg:"+JSON.stringify(a)),("main"===this.role||"small"===this.role)&&(t.noCamera?(s.videoSend=!1,a.video=!1):s.videoSend=!0),n.createOffer({media:s,success:function(i){console.log("Got publisher SDP!"),console.log(i),o.config=new e(n,a,i),t.success&&t.success()},error:function(e){console.error("WebVC error publishing"),console.error(e),t.error&&t.error()}})},this.unpublish=function(){var e={request:"unpublish"};n.send({message:e})},this.setting=function(e){this.needRepublish=!0,this.constraints=e,this.unpublish()},this.subscribe=function(e){n.createAnswer({jsep:e,media:{audioSend:!1,videoSend:!1,data:!0},success:function(e){var i={request:"start",room:t};n.send({message:i,jsep:e})},error:function(e){console.error("WebRVC error subscribing"),console.error(e)}})},this.setConfig=function(t){this.config?this.config.set(t):this.config=new e(n,t.values,null,t.ok)},this.getConfig=function(){return this.config?this.config.get():void 0},this.confirmConfig=function(){return this.config?this.config.confirm():void 0},this.onDataOpen=function(){this.isDataOpen=!0}}}angular.module("janusHangouts").factory("FeedConnection",e),e.$inject=["ConnectionConfig"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){return function(n,t,i,o){function s(e){return e.video!==c.video||e.audio!==c.audio}function a(e){e=e||{};var t={request:"configure"};l={},_.assign(l,r,c),_.assign(t,l),n.send({message:t,jsep:e.jsep,success:function(){u=e.ok},error:function(){l=null,console.error("Config request not sent")}})}var r={},l=null,c={audio:!0,video:!0},u=null;_.assign(c,t),a({jsep:i,ok:o}),this.get=function(){return r},this.set=function(e){e=e||{},e.values=e.values||{};var n={};_.assign(n,r,c),_.assign(c,r,e.values),null===l&&s(n)&&a({ok:e.ok})},this.confirm=function(){e(function(){null===l?console.error("I haven't sent a config. Where does this confirmation come from?"):(r=l,l=null,console.log("Connection configured",r),u&&u(),s(r)&&a())})}}}angular.module("janusHangouts").factory("ConnectionConfig",e),e.$inject=["$timeout"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s,a){function r(){e.dismiss("cancel"),n.go("signin")}function l(e){13==e.keyCode&&u.enter()}function c(){return u.user&&(isDebug||(window.localStorage.alimeeting_nickname=u.user+"__outer__"),a.resolve(u.user+"__outer__"),e.dismiss("cancel")),a.promise}var u=this;u.close=r,u.enter=c,u.keyup=l,u.user="",e.result=c}angular.module("janusHangouts").controller("UserDialogCtrl",e),e.$inject=["$modalInstance","$state","$scope","UserService","$q","editId","defer"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o){function s(){b.checkedignore=!b.checkedignore}function a(e){c(e)}function r(n){w?w.stop():"";var t=null,i=window.localStorage.settedConfig?JSON.parse(window.localStorage.settedConfig):null;(b.selectedAudioInput!=(((i||{}).audio||{}).mandatory||{}).sourceId||b.selectedVideo!=(((i||{}).video||{}).mandatory||{}).sourceId||b.selectedAudioOutput!=(i||{}).output)&&(t=g()),e.close(n?t:null)}function l(){setTimeout(function(){b.selectedAudioOutput=i.videooutput_initial,b.selectedAudioInput=i.audioinput_initial,b.selectedVideo=i.videoinput_initial,document.getElementById("videoSelect").value=i.videoinput_initial,document.getElementById("audioInputSelect").value=i.audioinput_initial,document.getElementById("audioOutputSelect").value=i.videooutput_initial,c(),d()},0)}function c(e){window.stream&&window.stream.getTracks().forEach(function(){w&&w.stop()});var t=g().config;console.log("constraints"+JSON.stringify(t)),requestUserMedia(t).then(function(i){if(window.stream){if("video"===e){var o=window.stream.getVideoTracks()[0];window.stream.removeTrack(o),window.stream.addTrack(i.getVideoTracks()[0])}else if("audio"===e){var s=window.stream.getAudioTracks()[0];window.stream.removeTrack(s),window.stream.addTrack(i.getAudioTracks()[0])}}else window.stream=i;i=window.stream;var a=$("#setting_video")[0];a.muted=!0,b.remotevideodisable=!1,b.localvideodisable=!1,attachMediaStream(a,i),h(t),w||(w=new n(window.audioContext)),w.connectToSource(i),clearInterval(S),S=setInterval(function(){y||(y=document.getElementById("meterval")),y&&(y.value=w.instant.toFixed(2))},200)})["catch"](function(e){console.log("err "+JSON.stringify(e)),b.remotevideodisable=!0,b.localvideodisable=!0})}function u(e,n){"undefined"!=typeof e.sinkId?e.setSinkId(n).then(function(){console.log("Success, audio output device attached: "+n)})["catch"](function(e){var n=e;"SecurityError"===e.name&&(n="You need to use HTTPS for selecting audio output device: "+e),console.error(n),b.selectedAudioOutput=b.audioOutputSelect[0].value}):console.warn("Browser does not support output device selection.")}function d(){_||(_=document.getElementById("video_sample")),u(_,b.selectedAudioOutput)}function h(e){window.echotest&&window.echotest.detach(),o.janus.attach({plugin:"janus.plugin.echotest",success:function(n){window.echotest=n;var t={audio:!1,video:!0};Janus.debug("Sending message ("+JSON.stringify(t)+")"),window.echotest.send({message:t});var i={data:!1};i.constraints=e,window.echotest.createOffer({media:i,success:function(e){window.echotest.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error:",e)}})},error:function(e){b.remotevideodisable=!0,console.error("  -- Error attaching plugin...",e)},onmessage:function(e,n){Janus.debug(" ::: Got a message :::"),Janus.debug(JSON.stringify(e)),void 0!==n&&null!==n&&(Janus.debug("Handling SDP as well..."),window.echotest.handleRemoteJsep({jsep:n}))},onlocalstream:function(){b.remotevideodisable=!1,b.localvideodisable=!1},onremotestream:function(e){var n=$("#remote_video")[0];n.muted=!0,attachMediaStream(n,e)},oncleanup:function(){if(b.needRepublish){console.log("republish"),b.needRepublish=!1;var e={audio:!1,video:!0};Janus.debug("Sending message ("+JSON.stringify(e)+")"),window.echotest.send({message:e});var n={data:!1};n.constraints=b.constraints,window.echotest.createOffer({media:n,success:function(n){window.echotest.send({message:e,jsep:n})},error:function(e){Janus.error("WebRTC error:",e)}})}}})}function g(){var e=b.selectedAudioInput,n=b.selectedVideo,t={config:{audio:{mandatory:e?{sourceId:e}:void 0},video:{mandatory:n?{sourceId:n}:void 0},output:b.selectedAudioOutput}};return t}function m(){b.step=2}function p(){b.step=1}function v(){_||(_=document.getElementById("video_sample")),_.play()}function f(){console.log("____________"+b.selectedAudioOutput),console.log("____________"+b.selectedAudioInput),console.log("____________"+b.selectedVideo),console.log(b.checkedignore),window.localStorage.ignore_setting=b.checkedignore+0,r(!0)}var b=this;b.close=r,b.setting=f,b.next=m,b.prev=p,b.user="",b.audioInputSelect=i.audioInputSelect,b.audioOutputSelect=i.audioOutputSelect,b.videoSelect=i.videoSelect,b.selectedAudioOutput=i.videooutput_initial,b.selectedAudioInput=i.audioinput_initial,b.selectedVideo=i.videoinput_initial,b.soundMeterVal=0,b.step=1,b.checkedignore=parseInt(window.localStorage.ignore_setting,10)||!0,b.isCheck=parseInt(window.localStorage.ignore_setting,10),b.audioSettingChange=a,b.changeAudioDestination=d,b.play=v,b.isChecked=s,b.remotevideodisable=!1,b.localvideodisable=!1,window.echotest=null;var w,S,_=document.getElementById("video_sample"),y=document.getElementById("meterval");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext}catch(k){console.log("Web Audio API not supported.")}l(t)}angular.module("janusHangouts").controller("SettingVideoCtrl",e),e.$inject=["$modalInstance","SoundMeter","devices","initObj","RoomService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t){function i(){return t.resolve(),e.dismiss("cancel"),window.location.reload(),t.promise}var o=this;o.close=i,o.errormsg=n,o.tipimage="zh-cn"===window.localStorage.lang?"http://g.alicdn.com/platform/video_it/0.1.6/images/image_tips.png":"http://g.alicdn.com/platform/video_it/0.1.6/images/image_tips_EN.png"}angular.module("janusHangouts").controller("SettingErrorDialogCtrl",e),e.$inject=["$modalInstance","errormsg","defer"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i){function o(){m.checkedignore=!m.checkedignore}function s(e){l(e)}function a(n){p?p.stop():"";var t=null,i=window.localStorage.settedConfig?JSON.parse(window.localStorage.settedConfig):null;(m.selectedAudioInput!=(((i||{}).audio||{}).mandatory||{}).sourceId||m.selectedVideo!=(((i||{}).video||{}).mandatory||{}).sourceId||m.selectedAudioOutput!=(i||{}).output)&&(t=d()),e.close(n?t:null)}function r(){setTimeout(function(){m.selectedAudioOutput=i.videooutput_initial,m.selectedAudioInput=i.audioinput_initial,m.selectedVideo=i.videoinput_initial,document.getElementById("videoSelect").value=i.videoinput_initial,document.getElementById("audioInputSelect").value=i.audioinput_initial,document.getElementById("audioOutputSelect").value=i.videooutput_initial,l(),u()},0)}function l(e){window.stream&&window.stream.getTracks().forEach(function(){p&&p.stop()});var t=d().config;console.log("constraints"+JSON.stringify(t)),requestUserMedia(t).then(function(t){if(window.stream){if("video"===e){var i=window.stream.getVideoTracks()[0];window.stream.removeTrack(i),window.stream.addTrack(t.getVideoTracks()[0])}else if("audio"===e){var o=window.stream.getAudioTracks()[0];window.stream.removeTrack(o),window.stream.addTrack(t.getAudioTracks()[0])}}else window.stream=t;t=window.stream;var s=$("#setting_video1")[0];s.muted=!0,m.localvideodisable=!1,attachMediaStream(s,t),p||(p=new n(window.audioContext)),p.connectToSource(t),clearInterval(v),v=setInterval(function(){b||(b=document.getElementById("meterval")),b&&(b.value=p.instant.toFixed(2))},200)})["catch"](function(e){console.log("err "+JSON.stringify(e)),m.localvideodisable=!0})}function c(e,n){"undefined"!=typeof e.sinkId?e.setSinkId(n).then(function(){console.log("Success, audio output device attached: "+n)})["catch"](function(e){var n=e;"SecurityError"===e.name&&(n="You need to use HTTPS for selecting audio output device: "+e),console.error(n),m.selectedAudioOutput=m.audioOutputSelect[0].value}):console.warn("Browser does not support output device selection.")}function u(){f||(f=document.getElementById("video_sample")),c(f,m.selectedAudioOutput)}function d(){var e=m.selectedAudioInput,n=m.selectedVideo,t={config:{audio:{mandatory:e?{sourceId:e}:void 0},video:{mandatory:n?{sourceId:n}:void 0},output:m.selectedAudioOutput}};return t}function h(){f||(f=document.getElementById("video_sample")),f.play()}function g(){console.log("____________"+m.selectedAudioOutput),console.log("____________"+m.selectedAudioInput),console.log("____________"+m.selectedVideo),window.localStorage.ignore_setting=m.checkedignore+0,a(!0)}var m=this;m.close=a,m.setting=g,m.user="",m.audioInputSelect=i.audioInputSelect,m.audioOutputSelect=i.audioOutputSelect,m.videoSelect=i.videoSelect,m.selectedAudioOutput=i.videooutput_initial,m.selectedAudioInput=i.audioinput_initial,m.selectedVideo=i.videoinput_initial,m.soundMeterVal=0,m.checkedignore=parseInt(window.localStorage.ignore_setting,10)||!0,m.isCheck=parseInt(window.localStorage.ignore_setting,10),m.audioSettingChange=s,m.changeAudioDestination=u,m.play=h,m.isChecked=o,m.localvideodisable=!1;var p,v,f=document.getElementById("video_sample"),b=document.getElementById("meterval");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext}catch(w){console.log("Web Audio API not supported.")}r(t)}angular.module("janusHangouts").controller("SettingDialogCtrl",e),e.$inject=["$modalInstance","SoundMeter","devices","initObj"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s){function a(){e.dismiss("cancel")}function r(){return s.resolve(),e.dismiss("cancel"),s.promise}var l=this;l.close=a,l.loginout=r,l.user=""}angular.module("janusHangouts").controller("LoginoutDialogCtrl",e),e.$inject=["$modalInstance","$state","$scope","UserService","$q","defer"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s,a){function r(){e.dismiss("cancel")}function l(){return s.resolve(),e.dismiss("cancel"),s.promise}var c=this;c.close=r,c.enter=l,c.display=a,c.user=""}angular.module("janusHangouts").controller("KickoutDialogCtrl",e),e.$inject=["$modalInstance","$state","$scope","UserService","$q","defer","display"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){e.dismiss("cancel")}var t=this;t.close=n}angular.module("janusHangouts").controller("InstallPluginDialogCtrl",e),e.$inject=["$modalInstance","$state","$scope","UserService","$q","defer"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t){function i(){return t.resolve(),e.dismiss("cancel"),t.promise}var o=this;o.close=i,o.errormsg=n}angular.module("janusHangouts").controller("ErrorDialogCtrl",e),e.$inject=["$modalInstance","errormsg","defer"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n){function t(t){var i=n.defer();return e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/error-dialog.html",controller:"ErrorDialogCtrl",controllerAs:"vm",resolve:{errormsg:function(){return t},defer:function(){return i}}}),i.promise}function i(t){var i=n.defer();return e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/setting-error-dialog.html",controller:"SettingErrorDialogCtrl",controllerAs:"vm",resolve:{errormsg:function(){return t},defer:function(){return i}}}),i.promise}function o(){e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/browser-dialog.html",controller:"BrowserDialogCtrl",controllerAs:"vm"})}function s(t){var i=n.defer();return e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/user-dialog.html",controller:"UserDialogCtrl",controllerAs:"vm",resolve:{editId:function(){return t},defer:function(){return i}}}),i.promise}function a(){var t=n.defer();return e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/loginout-dialog.html",controller:"LoginoutDialogCtrl",controllerAs:"vm",resolve:{defer:function(){return t}}}),t.promise}function r(t){{var i=n.defer();e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/kickout-dialog.html",controller:"KickoutDialogCtrl",controllerAs:"vm",resolve:{display:function(){return t},defer:function(){return i}}})}return i.promise}function l(){var e=n.defer();return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(n){var t={};t.audioInputSelect=[],t.audioOutputSelect=[],t.videoSelect=[];for(var i=n,o=0;o!==i.length;++o){var s=i[o],a={};a.value=s.deviceId,"audioinput"===s.kind?(a.text=s.label||"microphone "+(t.audioInputSelect.length+1),t.audioInputSelect.push(a)):"audiooutput"===s.kind?(a.text=s.label||"speaker "+(t.audioOutputSelect.length+1),t.audioOutputSelect.push(a)):"videoinput"===s.kind?(a.text=s.label||"camera "+(t.videoSelect.length+1),t.videoSelect.push(a)):console.log("Some other kind of source/device: ",s)}var r=window.localStorage.settedConfig?JSON.parse(window.localStorage.settedConfig):null,l=null,c=null,u=null;return console.log(r),r&&(l=(_.detect(t.audioInputSelect,function(e){return e.value==((r.audio||{}).mandatory||{}).sourceId})||{}).value,c=(_.detect(t.videoSelect,function(e){return e.value==((r.video||{}).mandatory||{}).sourceId})||{}).value,u=(_.detect(t.audioOutputSelect,function(e){return e.value==r.output})||{}).value),e.resolve({audioinput_initial:l||(t.audioInputSelect[0]?t.audioInputSelect[0].value:""),videoinput_initial:c||(t.videoSelect[0]?t.videoSelect[0].value:""),videooutput_initial:u||(t.audioOutputSelect[0]?t.audioOutputSelect[0].value:""),audioInputSelect:t.audioInputSelect,audioOutputSelect:t.audioOutputSelect,videoSelect:t.videoSelect,devices:n})}):(console.log("enumerateDevices() not supported."),setTimeout(function(){return e.reject()})),e.promise}function c(){var t=n.defer();return l().then(function(n){var i=e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/setting-video.html",controller:"SettingVideoCtrl",controllerAs:"vm",windowClass:"setting-modal-dlg",resolve:{defer:function(){return t},devices:function(){return n.devices},initObj:function(){return n}}});i.result.then(function(e){window.echotest&&window.echotest.detach(),t.resolve(e)},function(){window.echotest&&window.echotest.detach(),t.resolve()})})["catch"](function(){return console.log("error callback"),t.resolve()}),t.promise}function u(){var t=n.defer();return l().then(function(n){var i=e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/setting-dialog.html",controller:"SettingDialogCtrl",controllerAs:"vm",windowClass:"setting-modal-dlg",resolve:{defer:function(){return t},devices:function(){return window.echotest&&window.echotest.detach(),n.devices},initObj:function(){return window.echotest&&window.echotest.detach(),n}}});i.result.then(function(e){t.resolve(e)},function(){t.resolve()})})["catch"](function(){return console.log("error callback"),t.resolve()}),t.promise}function d(){var t=n.defer();e.open({animation:!0,position:["center","center"],templateUrl:"app/components/dialog/installplugin-dialog.html",controller:"InstallPluginDialogCtrl",controllerAs:"vm",resolve:{defer:function(){return t}}})}this.showErroHint=t,this.showSettingErrorDlg=i,this.showEnterMeetingDlg=s,this.showKickoutDlg=r,this.showInstallPlugin=d,this.showBrowserDlg=o,this.showLoginOutDlg=a,this.showSettingDlg=c,this.showSettingDlgFW=u}angular.module("janusHangouts").service("DialogService",e),e.$inject=["$modal","$q"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){e.dismiss("cancel")}var t=this;t.close=n}angular.module("janusHangouts").controller("BrowserDialogCtrl",e),e.$inject=["$modalInstance"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(){var e=this;e.text=e.message.text()}return{restrict:"EA",templateUrl:"app/components/chat/jh-log-entry.html",scope:{message:"="},controllerAs:"vm",bindToController:!0,controller:e}}angular.module("janusHangouts").directive("jhLogEntry",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(e){var n=$(window).height();$("#jh-chat-messages").css({height:n-156+"px"}),e.$watch("vm.messages.length",function(e){if(void 0!==e){var n=document.getElementById("jh-chat-messages");setTimeout(function(){n.scrollTop=n.scrollHeight},100)}})}function n(){function e(){n.isChatShow=!1,n.hideChat=!0}var n=this;n.hideChat=!1,n.close=e}return{restrict:"EA",templateUrl:"app/components/chat/jh-chat.html",scope:{messages:"=",isChatShow:"="},link:e,controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhChat",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(){var e=this;e.embedOptions={link:!0,linkTarget:"_blank",image:{embed:!0},pdf:{embed:!1},audio:{embed:!0},code:{highlight:!1},basicVideo:!0,tweetEmbed:!1}}return{restrict:"EA",templateUrl:"app/components/chat/jh-chat-message.html",scope:{message:"="},controllerAs:"vm",bindToController:!0,controller:e}}angular.module("janusHangouts").directive("jhChatMessage",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(e,n){var t=$(".custome-input",n)[0];e.$watch("vm.isChatShow",function(e){e&&setTimeout(function(){t.focus()},0)})}function t(){function n(){e.writeChatMessage(t.text),t.text=null}var t=this;t.text=null,t.submit=n}return{restrict:"EA",templateUrl:"app/components/chat/jh-chat-form.html",scope:{message:"=",isChatShow:"="},controllerAs:"vm",bindToController:!0,controller:t,link:n}}angular.module("janusHangouts").directive("jhChatForm",e),e.$inject=["ActionService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){function e(){}return{restrict:"EA",templateUrl:"app/components/chat/jh-chat-button.html",scope:{feed:"=",chatShow:"=",toggleChatFn:"="},controllerAs:"vm",bindToController:!0,controller:e}}angular.module("janusHangouts").directive("jhChatButton",e),e.$inject=["RoomService","FeedsService"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){function n(){e.open({animation:!0,templateUrl:"app/components/browser-info/browser-info.html",controller:"BrowserInfoCtrl",controllerAs:"vm"})}var t=this;t.showHelp=n}return{restrict:"EA",templateUrl:"app/components/browser-info/jh-browser-info.html",scope:!0,controllerAs:"vm",bindToController:!0,controller:n}}angular.module("janusHangouts").directive("jhBrowserInfo",e),e.$inject=["$modal"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e){function n(){e.dismiss("cancel")}var t=this;t.close=n}angular.module("janusHangouts").controller("BrowserInfoCtrl",e),e.$inject=["$modalInstance"]}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){}angular.module("janusHangouts").controller("SigninController",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(){}angular.module("janusHangouts").controller("PluginController",e)}(),/*
 * Copyright (C) 2015 SUSE Linux
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE.txt file for details.
 */
function(){function e(e,n,t,i,o,s,a,r,l){function c(){requestUserMedia({video:!0,audio:!0}).then(function(){d()})["catch"](function(e){console.log("err "+JSON.stringify(e)),r.showSettingErrorDlg()})}function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function d(){var e=[{url:"stun:42.120.74.51:55000?transport=udp"},{url:"stun:50.233.116.37:55000?transport=udp"}],n={iceServers:e,iceTransportPolicy:"all"},t={},i={offerToReceiveAudio:1};t.optional=[{googIPv6:!1}],y=new RTCPeerConnection(n,t),y.onicecandidate=v,y.createOffer(g,m,i)}function h(e){r.showSettingDlg().then(function(n){n&&(console.log("constraints "+JSON.stringify(n)),window.localStorage.settedConfig=JSON.stringify(n.config)),window.echotest&&window.echotest.detach(),s.enter(e)},function(){s.enter(e)})["catch"](function(){s.enter(e)})}function g(e){y.setLocalDescription(e)}function m(e){console.log("Error creating offer: ",e)}function p(e){var n="candidate:",t=e.indexOf(n)+n.length,i=e.substr(t).split(" ");return{component:i[1],type:i[7],foundation:i[0],protocol:i[2],address:i[4],port:i[5],priority:i[3],fields:i}}function v(e){if(e.candidate){var i=p(e.candidate.candidate);if(console.log("c.address"+i.address),"srflx"!=i.type)return;k||(k=!0,f(i.address).then(function(){window.localStorage.uuid__video=Math.random(),n.enter()},function(e){console.log(e),t.go("signin")}))}else y.close(),y=null,k||(console.log("No ip address get"),f().then(function(){window.localStorage.uuid__video=Math.random(),n.enter()},function(e){console.log(e),t.go("signin")})),console.log("close")}function f(t){var c=e.defer(),d=i.uuid;return o.getCurrentUserRoom(d,t).then(function(e){var t=e.roomid,i=e.nickName||e.userName;if(s.server=e.signallingServerUrl,s.token=e.token,s.iceServers=e.iceServers,s.useRelay=e.useRelay,s.turnIp=(e.iceServers[0]||{}).url.split(":")[1],n.roomid=e.roomid,a.setInvitelUrl(e.inviteUrl),a.setUserData(d),a.setUser(i),isDebug?(console.log("++++++++++++++now debugging++++++++++++++"),window.uuid=u()):window.localStorage.uuid||(window.localStorage.uuid=u()),i&&i.trim().length)b(t,i).then(function(){c.resolve()},function(){c.reject()});else{var o=isDebug?"":window.localStorage.alimeeting_nickname;o&&o.trim().length?b(t,o).then(function(){c.resolve()},function(){c.reject()}):r.showEnterMeetingDlg(45).then(function(e){b(t,e).then(function(){c.resolve()},function(){c.reject()})})}},function(){r.showErroHint(l.T("error_hint_msg")),c.reject("No Room found!")}),c.promise}function b(n,t){var i=e.defer();s.setRoom({id:n});var a=o.signin(t);return a.then(function(){i.resolve("success")},function(e){i.reject(e)},function(e){i.notify(e)}),i.promise}function w(){o.currentUser().then(function(e){s.connect().then(function(){parseInt(window.localStorage.ignore_setting,10)?s.enter(e.username):h(e.username)})})}n.enter=w,n.roomid="",n.inviteUrl="";var S=-1!==window.navigator.userAgent.indexOf("Chrome");if(!S)return void r.showBrowserDlg();var _=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10);if(41>_)return void r.showBrowserDlg();c(),n.$on("room.error",function(e,n){console.log("Server reported the following error:\n"+n)}),n.$on("user.unset",function(){s.leave()});var y,k=!1}angular.module("janusHangouts").controller("MainCtrl",e),e.$inject=["$q","$scope","$state","$stateParams","UserService","RoomService","InvitePeopleService","DialogService","T"]}(),function(){angular.module("janusHangouts.config",[]).provider("jhConfig",function(){var e={janusServer:"http://10.65.1.139:8088/janus",janusServerSSL:"http://janus1.yuncourt.com:8088/janus",janusDebug:!1,httpsAvailable:!0,httpsUrl:null,videoThumbnails:!0,iceServers:null,token:"",version:"0.3.8"};return{$get:function(){return e}}})}(),angular.module("janusHangouts").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="row" id="main-chat-session"><div jh-video-chat-v1="true"></div></div>'),e.put("app/pages/plugin.html",'<div class="plugin-page"><div class="bold">{{\'plugin_install_hint\'| translate}}</div><div>{{\'plugin_install_hint1\'| translate}} <a href="http://alimeeting.oss-cn-hangzhou.aliyuncs.com/webvc/screen-sharing.crx" target="_blank">{{\'plugin_install_hint2\'| translate}}</a></div><div>{{\'plugin_install_hint3\'| translate}} <span class="bold red">{{\'plugin_install_hint3_1\'| translate}}</span> {{\'plugin_install_hint3_2\'| translate}}</div><div class="plugin_install_hint3"><img src="http://g.alicdn.com/platform/video_it/0.0.15/images/plugin_install3.png"></div><div>{{\'plugin_install_hint4\'| translate}}</div><div class="plugin_install_hint4"><img src="http://g.alicdn.com/platform/video_it/0.0.15/images/plugin_install4.png"></div><div>{{\'plugin_install_hint5\'| translate}}<span class="bold red">{{\'plugin_install_hint5_1\'| translate}}</span> {{\'plugin_install_hint5_2\'| translate}}</div><div class="plugin_install_hint5"><img src="http:/g.alicdn.com/platform/video_it/0.0.15/images/plugin_install5.png"></div></div>'),e.put("app/signin/signin.html",'<div id="signin"><jh-signin-form></jh-signin-form></div>'),e.put("app/components/browser-info/browser-info.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">Information about browsers</h3></div><div class="modal-body"><h4>Firefox</h4><p>At least Firefox 36 is required, a more recent version is recommended.</p><p>Firefox will refuse to use any bit rate lower than a certain limit (200 kbps by default). In some situations, a lower bit rate can be useful to save bandwidth and processing power in the clients. This limit can be adjusted (a sensible value would be 64) modifying the <code>media.peerconnection.video.min_bitrate</code> setting at <a href="about:config">about:config</a>.</p><h4>Chrom(e/ium)</h4><p>Jangouts has been successfully tested with Chromium 41. It will probably work with older versions as well, but the usage of a version as recent as possible is recommended.</p><p>Under certain circumstances, some versions of Chromium has been reported to cause an excessive CPU usage in the Janus server powering Jangouts. This problem has not been observed with recent versions of Janus and Chromium.</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="vm.close()">OK</button></div>'),e.put("app/components/browser-info/jh-browser-info.html",'<small><i class="fa fa-info-circle"></i> Tested with recent versions of Firefox, Chrome and Chromium. Please review the <a class="alert-link" href="#" ng-click="vm.showHelp()">detailed information</a> about browsers before proceeding.</small>'),e.put("app/components/chat/jh-chat-button.html",'<span class="custome-btn" ng-show="!vm.chatShow" title="{{\'message_box\' | translate}}" ng-click="vm.toggleChatFn()"><span class="chatboxes icon_new icon_big icon_normal"></span></span><span class="active custome-btn" ng-show="vm.chatShow" title="{{\'close_message_box\' | translate}}" ng-click="vm.toggleChatFn()"><span class="chatboxes icon_new icon_big icon_normal"></span></span>'),e.put("app/components/chat/jh-chat-form.html",'<form name="chatMessage" ng-submit="vm.submit()"><div class="input-group"><input class="custome-input" autofocus="" placeholder="{{\'sendPlaceholder\' | translate }}" type="text" ng-model="vm.text" required=""></div></form>'),e.put("app/components/chat/jh-chat-message.html",'<div class="header"><strong class="speaker">{{ vm.message.content.feed.getDisplayName() }}</strong> <small class="pull-right text-muted"><span class="glyphicon glyphicon-time"></span> {{ vm.message.timestamp | date:\'shortTime\' }}</small></div><div class="bubble"><ng-embed embed-data="vm.message.text()" embed-options="vm.embedOptions"></ng-embed></div>'),e.put("app/components/chat/jh-chat.html",'<div class="jh-chat panel"><div class="panel-header"><header><span class="chat-title">{{\'sendPlaceholder\' | translate }}</span> <span ng-click="vm.close()" class="guanbi icon_new" style="float:right;padding:0 10px;color:black;font-size:18px;"></span></header></div><div class="panel-body" id="jh-chat-messages"><ul><li ng-repeat="m in vm.messages"><jh-chat-message message="m" ng-if="m.type === \'chatMsg\'"></jh-chat-message><jh-log-entry message="m" ng-if="m.type !== \'chatMsg\'"></jh-log-entry></li></ul></div><div class="panel-footer" id="chat-form-footer"><jh-chat-form is-chat-show="vm.isChatShow"></jh-chat-form></div></div>'),e.put("app/components/chat/jh-log-entry.html",'<span class="log-entry">{{ vm.text }}</span>'),e.put("app/components/dialog/browser-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'error_hint\' | translate }}</h3></div><div class="modal-body"><div class="error-msg">{{\'browser_error_hint1\' | translate }}</div><div class="error-msg">{{\'browser_error_hint2\' | translate }}</div><div class="error-msg"><a href="http://alimeeting.oss-cn-hangzhou.aliyuncs.com/webvc/chrome-install/googlechrome.dmg">{{\'browser_error_hint3\' | translate }}</a></div><div class="error-msg"><a href="http://alimeeting.oss-cn-hangzhou.aliyuncs.com/webvc/chrome-install/ChromeStandaloneSetup64.exe">{{\'browser_error_hint4\' | translate }}</a></div><div class="error-msg"><a href="http://alimeeting.oss-cn-hangzhou.aliyuncs.com/webvc/chrome-install/ChromeStandaloneSetup32.exe">{{\'browser_error_hint5\' | translate }}</a></div><div class="center"><button class="btn btn-primary" ng-click="vm.close()">{{\'ok_btn\' | translate }}</button></div></div>'),e.put("app/components/dialog/error-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'error_hint\' | translate }}</h3></div><div class="modal-body"><div class="error-msg">{{vm.errormsg}}</div><div class="center"><button class="btn btn-primary" ng-click="vm.close()">{{\'ok_btn\' | translate }}</button></div></div>'),e.put("app/components/dialog/installplugin-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'install_pulgin\' | translate }}</h3></div><div class="modal-body"><div class="error-msg center"><div>{{\'plugin_tip1\' | translate}}</div><div><a style="padding-right:15px;" href="https://chrome.google.com/webstore/detail/alimeeting-screen-sharing/eihiicjkalbnnpgokfoigkojhdhdnble" ng-click="vm.close()" target="_blank">{{\'plugin_store\' | translate}}</a> <a href="./#/pluginhelp" ng-click="vm.close()" target="_blank">{{\'plugin_server\' | translate}}</a></div><b></b><div class="gray">{{\'plugin_tip3\' | translate}}</div><div class="red">{{\'plugin_tip4\' | translate}}</div></div><div class="center"><button class="btn btn-primary" ng-click="vm.close()">{{\'cancel\' | translate }}</button></div></div>'),e.put("app/components/dialog/kickout-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'kick_out\' | translate }}</h3></div><div class="modal-body"><div class="error-msg" style="text-align: center">{{\'kickout_tip1\' | translate }}<span style="font-weight: bold;">{{vm.display}}</span>{{\'kickout_tip2\' | translate }}</div><div class="center"><button class="btn btn-primary btn-margin" ng-click="vm.enter()">{{\'ok_btn\' | translate }}</button> <button class="btn btn-primary" ng-click="vm.close()">{{\'cancel\' | translate }}</button></div></div>'),e.put("app/components/dialog/loginout-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'sign_out\' | translate }}</h3></div><div class="modal-body"><div class="error-msg" style="text-align: center">{{\'login_out\' | translate }}</div><div class="center"><button class="btn btn-primary btn-margin" ng-click="vm.loginout()">{{\'ok_btn\' | translate }}</button> <button class="btn btn-primary" ng-click="vm.close()">{{\'cancel\' | translate }}</button></div></div>'),e.put("app/components/dialog/setting-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'setting\' | translate }}</h3></div><div class="modal-body setting-container" style="padding:20px 40px;"><div class="left" style="width:54%;"><div class="clear"></div><div class="control-group"><label class="control-label">{{\'camera\' | translate}}</label><div class="controls"><select ng-model="vm.selectedVideo" id="videoSelect" ng-change="vm.audioSettingChange(\'video\')"><option ng-repeat="videoSelect in vm.videoSelect" value="{{videoSelect.value}}">{{videoSelect.text}}</option></select><div class="setting-hint gray">{{\'camera_hint\' | translate}}</div></div></div><div class="clear"></div><div class="control-group"><label class="control-label">{{\'microphone\' | translate}}</label><div class="controls"><select ng-model="vm.selectedAudioInput" ng-change="vm.audioSettingChange(\'audio\')" id="audioInputSelect"><option ng-repeat="audioSource in vm.audioInputSelect" value="{{audioSource.value}}">{{audioSource.text}}</option></select><div class="setting-hint gray">{{\'microphone_hint\' | translate}}</div><meter high="0.25" max="1" value="{{vm.soundMeterVal}}" id="meterval" class="progressbar"></meter></div></div><div class="clear"></div><div class="control-group"><label class="control-label">{{\'speaker\' | translate}}</label><div class="controls"><div class="left" style="width: 83%;"><select ng-model="vm.selectedAudioOutput" id="audioOutputSelect" ng-change="vm.changeAudioDestination()"><option ng-repeat="audioOutput in vm.audioOutputSelect" value="{{audioOutput.value}}">{{audioOutput.text}}</option></select></div><a ng-click="vm.play()" style="cursor: pointer;color:#29ace0;"><span class="xiaoxiflat"></span>{{\'output_test\' | translate }}</a><audio src="//g.alicdn.com/platform/video_it/0.1.12/assets/sounds/audio.mp3" id="video_sample"></audio><div class="setting-hint gray">{{\'speaker_hint\' | translate}}</div></div></div></div><div class="right" style="padding-left: 50px;width:45%;"><div class="setting-hint gray" style="margin-top:0px;">{{\'setting_video_hint0\' | translate}}</div><div class="setting-video-con"><span class="background-clr"><span style="z-index:2"><span class="custome-btn disable center video-center" title="{{\'setting_no_camera\' | translate}}"><span class="iconfontguanshipin icon_new icon_big icon_disable" ng-show="vm.localvideodisable"></span></span></span></span><video id="setting_video1" autoplay=""></video></div></div><div class="clear"></div></div><div class="center" style="margin-bottom: 20px;"><button class="btn btn-primary btn-margin" ng-click="vm.setting()">{{\'ok_btn\' | translate }}</button><div class="gray"><input type="checkbox" ng-checked="vm.checkedignore" ng-click="vm.isChecked()"> {{\'setting_ignore\' | translate}}</div></div>'),e.put("app/components/dialog/setting-error-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'error_hint\' | translate }}</h3></div><div class="modal-body"><div class="error-msg">{{\'setting_error_hint1\' | translate}}</div><div class="error-msg">{{\'setting_error_hint2\' | translate}}<i class="setting-camera"></i></div><div class="error-msg">{{\'setting_error_hint3\' | translate}}</div><div><img src="{{vm.tipimage}}"></div><div class="error-msg">{{\'setting_error_hint4\' | translate}}</div><div class="center"><button class="btn btn-primary" ng-click="vm.close()">{{\'ok_btn\' | translate }}</button></div></div>'),e.put("app/components/dialog/setting-video.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <span class="prev keyboardarrowleft" ng-click="vm.prev()" ng-class="{\'hide\':vm.step == 1}"></span><h3 class="modal-title">{{\'setting_confirm_title\' | translate }}</h3></div><div class="video-setting-container" ng-class="{\'hide\':vm.step != 1}"><div class="modal-body setting-container"><div><div class="left" style="padding-left:50px"><div class="setting-hint bold title">{{\'setting_video_confirm\' | translate}}</div><div class="setting-video-con"><span class="background-clr"><span style="z-index:2"><span class="custome-btn disable center video-center" title="{{\'setting_no_camera\' | translate}}"><span class="iconfontguanshipin icon_new icon_big icon_disable" ng-show="vm.localvideodisable"></span></span></span></span><video id="setting_video" autoplay="" class="mirrored"></video></div><div class="control-group"><label class="control-label">{{\'camera\' | translate}}</label><div class="controls"><select id="videoSelect" ng-model="vm.selectedVideo" style="width: 245px;" ng-change="vm.audioSettingChange(\'video\')"><option ng-repeat="videoSelect in vm.videoSelect" value="{{videoSelect.value}}">{{videoSelect.text}}</option></select><div class="setting-hint gray">{{\'camera_hint\' | translate}}</div></div></div></div><div class="right" style="padding-left: 50px;"><div class="setting-hint bold title">{{\'setting_video_remote_confirm\' | translate}}</div><div class="setting-video-con"><span class="background-clr"><span style="z-index:2"><span class="custome-btn disable center video-center" title="{{\'setting_no_camera\' | translate}}"><span class="iconfontguanshipin icon_new icon_big icon_disable" ng-show="vm.remotevideodisable"></span></span></span></span><video id="remote_video" autoplay=""></video></div><div class="setting-hint" style="margin-top:12px;">{{\'setting_video_hint\' | translate}}</div><div class="setting-hint gray">{{\'setting_video_hint1\' | translate}}</div></div></div><div class="clear"></div></div><div class="center"><button class="btn btn-primary btn-margin _180btn" ng-click="vm.next()">{{\'next_btn\' | translate }}</button></div></div><div class="audio-setting-container" ng-class="{\'hide\':vm.step == 1}"><div class="modal-body setting-container"><div class="setting-hint bold title">{{\'setting_audio_hint\' | translate}}</div><div style="margin:0 70px;"><div class="control-group"><label class="control-label">{{\'microphone\' | translate}}</label><div class="controls"><select ng-model="vm.selectedAudioInput" id="audioInputSelect" ng-change="vm.audioSettingChange(\'audio\')"><option ng-repeat="audioSource in vm.audioInputSelect" value="{{audioSource.value}}">{{audioSource.text}}</option></select><div class="micro-hint setting-hint gray">{{\'microphone_hint\' | translate}}</div><meter high="0.25" max="1" value="{{vm.soundMeterVal}}" id="meterval" class="progressbar" style="width: 100%;height:0.6em;"></meter></div></div><div class="control-group"><label class="control-label">{{\'speaker\' | translate}}</label><div class="controls"><div class="left" style="width: 88%;"><select ng-model="vm.selectedAudioOutput" id="audioOutputSelect" ng-change="vm.changeAudioDestination()"><option ng-repeat="audioOutput in vm.audioOutputSelect" value="{{audioOutput.value}}">{{audioOutput.text}}</option></select></div><a ng-click="vm.play()" style="cursor: pointer;color:#29ace0;"><span class="xiaoxiflat"></span>{{\'output_test\' | translate }}</a><audio src="//g.alicdn.com/platform/video_it/0.1.12/assets/sounds/audio.mp3" id="video_sample"></audio><div class="setting-hint gray">{{\'speaker_hint\' | translate}}</div></div></div></div><div class="center"><button class="btn btn-primary btn-margin _180btn" ng-click="vm.setting()">{{\'enter_meeting\' | translate }}</button><div class="gray"><input type="checkbox" ng-checked="vm.checkedignore" ng-click="vm.isChecked()"> {{\'setting_ignore\' | translate}}</div></div></div></div>'),e.put("app/components/dialog/user-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'enter_meeting\' | translate }}</h3></div><div class="modal-body"><div class="control-group"><label for="subject" class="control-label">{{\'display_name\' | translate }}</label><div class="controls"><input type="text" ng-keyup="vm.keyup($event)" ng-model="vm.user" name="subject" id="display_name" class="field" size="50" placeholder="{{\'display_name_hint\' | translate }}"></div></div><div class="center"><button class="btn btn-primary btn-margin" ng-click="vm.enter()">{{\'enter_meeting\' | translate }}</button></div></div>'),e.put("app/components/feed/jh-feed.html",'<figure ng-class="{\'own-feed\': vm.feed.isPublisher, sticky: vm.highlightedByUser, sticky:vm.highlighted}" ng-init="buttons=false" ng-click="vm.click()" ng-mouseenter="buttons=true" ng-mouseleave="buttons=false"><div class="thumb" ng-class="{\'disable-video\':!vm.feed.getVideoEnabled() || !vm.feed.getCameraEnable()}"><span class="loading icon_new icon_big center loading-center" ng-show="vm.feed.getVideoEnabled() && vm.feed.getCameraEnable()"></span> <span class="background-clr"><span style="z-index:2"><jh-video-button feed="vm.feed" ng-hide="vm.feed.isShareScreen"></jh-video-button></span></span><video autoplay="" wmode="Opaque" class="face" style="z-index:1;position: absolute;" ng-class="{mirrored: vm.mirrored}" ng-show="(vm.thumbnailTag() === \'video\')&& vm.feed.getVideoEnabled()"></video><canvas ng-show="false"></canvas><span class="pull-top-right"><span class="innerpeople" ng-show="!vm.feed.outter"></span> <span class="white">{{ vm.feed.getDisplayName() }}</span><spa ng-hide="vm.feed.isShareScreen"><span class="xiala icon_new" title="{{\'openmenu\' | translate}}" ng-click="vm.toggleMenu($event)" ng-show="!vm.expanded"></span> <span class="iconfontshouqi icon_new" title="{{\'closemenu\' | translate}}" ng-click="vm.toggleMenu($event)" ng-show="vm.expanded"></span></spa></span> <span class="pull-center" ng-show="vm.expanded"><span><jh-sticky-button feed="vm.feed" click-fn="vm.toggleHighlightFn()" highlighted="vm.highlighted" sticky="vm.highlightedByUser"></jh-sticky-button><div class="func-video cursor" title="{{\'kick_out\' | translate}}" ng-click="vm.kickOut($event)" ng-hide="vm.feed.isPublisher || vm.localfeed.outter">{{\'kick_out\' | translate}}</div></span></span> <span class="pull-buttom-right"><jh-unpublish-button feed="vm.feed"></jh-unpublish-button><jh-audio-button feed="vm.feed" ng-hide="vm.feed.isShareScreen"></jh-audio-button></span></div></figure>'),e.put("app/components/feed/jh-main-feed.html",'<video autoplay="" class="video_main" id="video_main_tt"></video>'),e.put("app/components/feed/jh-mainscreen-feed.html",'<video autoplay="" class="video_main"></video>'),e.put("app/components/footer/jh-footer.html",'<footer class="footer"></footer>'),e.put("app/components/fullscreen/jh-fullscreen-button.html",'<span class="custome-btn" ng-show="!vm.isFullscreen()" title="{{\'fullscreen\' | translate}}" ng-click="vm.requestFullscreen()"><i class="fullscreenpng fullscreen"></i></span> <span class="custome-btn" title="{{\'exit_fullscreen\' | translate}}" ng-show="vm.isFullscreen()" ng-click="vm.exitFullscreen()"><i class="exit-fullscreenpng fullscreen"></i></span>'),e.put("app/components/invite-people/invite-people-dialog.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">{{\'invite_title\' | translate }}</h3></div><div class="modal-body" ng-click="vm.clearUser($event)"><div class="control-group"><label for="link" class="control-label">{{\'link_address\' | translate }}</label><div class="controls"><input type="text" name="link" class="field" readonly="readonly" ng-value="vm.link" id="link_input"> <button class="btn btn-primary" id="link_copy_btn" ng-click="vm.copy(this)">{{\'copy\' | translate }}</button><div style="color: gray;padding:4px 0;font-size:14px">{{\'invite_hint\' | translate}}</div></div></div><div class="control-group"><span ng-repeat="userselecteed in vm.selectUsers" class="email-con">{{userselecteed.nickName || userselecteed.email}} <i ng-click="vm.rmEmail(userselecteed.email)" class="guanbi icon_new email-colse"></i></span></div><div class="control-group"><label for="subject" class="control-label">{{\'email_address\' | translate }}</label><div class="controls emails-container"><input type="text" ng-model="vm.currentEmail" ng-change="vm.changeUser($event)" name="subject" ng-keyup="vm.keyup($event)" ng-click="vm.clickPrevent($event)" class="field" id="emails_invited" size="60" placeholder="{{\'invite_email_tip\' | translate }}"><div class="error-email-msg" ng-show="vm.showerrmsg">{{\'email_hint\' | translate}}</div><ul ng-show="vm.users && vm.users.length" class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-1" tabindex="0" style="z-index: 1; top: 38px; left: 0px;" ng-click="vm.selectUser($event)"><li class="ui-menu-item" role="presentation" ng-repeat="user in vm.users"><a data-email="{{user.email}}" data-user="{{user}}" class="ui-corner-all" tabindex="-1">{{user.name}}, {{user.chinese_nickname}} , {{user.email}}</a></li></ul></div></div></div><div class="modal-footer center"><button class="btn btn-primary" ng-click="vm.invite()">{{\'invite\' | translate }}</button></div>'),e.put("app/components/invite-people/jh-invite-button.html",'<div style="display: inline-block;" tooltip-placement="bottom"><span class="custome-btn" title="{{\'invite_title\' | translate }}" ng-click="vm.click()"><span class="iconfontyaoqing icon_new icon_big icon_normal"></span></span></div>'),e.put("app/components/invite-people/jh-invite-panel.html",'<div class="invite-panel"><span class="white" style="padding-right:10px;">{{\'invite_tip\' | translate }}</span> <button class="btn btn-primary" ng-click="vm.click(this)">{{\'invite_title\' | translate }}</button></div>'),e.put("app/components/room/consent-dialog.html",'<img style="display: none;">'),e.put("app/components/screen-share/jh-screen-share-button.html",'<div style="display: inline-block;" title="{{vm.title()}}" ng-class="{\'disable\':!vm.enabled()}" tooltip-placement="bottom"><span class="custome-btn" ng-disabled="!vm.enabled()" ng-click="vm.click()"><span class="iconfontgongxiang icon_new icon_big icon_normal"></span></span></div>'),e.put("app/components/screen-share/jh-screen-share-hint.html",'<small ng-if="vm.visible()"><span ng-if="vm.usingSSL()">If you wish to use the screen sharing functionality, make sure you have understood <a class="alert-link" href="#" ng-click="vm.showHelp()">these instructions</a>.</span> <span ng-if="!vm.usingSSL()">Screen sharing will not work without SSL. If you want to make use of that functionality, access the <a class="alert-link" ng-href="{{vm.httpsUrl()}}">HTTPS version</a> of this site.</span></small>'),e.put("app/components/screen-share/screen-share-help.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">Screen sharing</h3></div><div class="modal-body"><p>If you\'re using a recent version of Chrome (34+), you\'ll need to install <a href="https://chrome.google.com/webstore/detail/janus-webrtc-screensharin/hapfgfdkleiggjjpfpenajgdnfckjpaj">this extension</a>. If you\'re using an older verson of Chrome, instead, you\'ll need to manually enable the Chrome flag <a href="chrome://flags/#enable-usermedia-screen-capture">chrome://flags/#enable-usermedia-screen-capture</a>. Otherwise you\'ll get a permission error. Moreover, please beware that some versions of Chrome may only support the feature if you explicitly pass the <code>--enable-usermedia-screen-capturing</code> parameter on the command line.</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="vm.close()">OK</button></div>'),e.put("app/components/user/jh-signin-form.html",'<div class="form-signin"><div class="title">{{\'feed_thanks\' | translate}}</div><div><a href="{{vm.feedbackurl}}">{{\'feeb_click\' | translate}}</a></div></div>'),e.put("app/components/user/jh-user-panel.html",'<span class="custome-btn logout_icon" ng-click="vm.signout()" title="{{\'sign_out\' | translate }}"><span class="hungup icon_new icon_big icon_normal"></span></span>'),e.put("app/components/videochat/jh-thumbnails-mode-button.html",'<div class="checkbox" tooltip="Disable to lower bandwidth and CPU usage" tooltip-placement="bottom"><label><input type="checkbox" ng-checked="vm.isChecked()" ng-click="vm.click()">Video thumbnails</label></div>'),e.put("app/components/videochat/jh-video-chat-v1.html",'<div class="row video-main-con" ng-mouseenter="vm.show=true;" ng-mouseleave="vm.show=false;vm.showHide(false)" ng-mousemove="vm.mousemv()"><span class="logo-icon"></span><div id="videochat-playroom"><span class="loading-container" ng-hide="!vm.highlightedFeed().getVideoEnabled() || !vm.highlightedFeed().getCameraEnable()"><span class="loading icon_new" style="font-size:88px;"></span></span><div ng-if="!vm.highlightedFeed().isShareScreen" id="main-video" jh-main-feed="true" feed="vm.highlightedFeed()" ng-show="vm.highlightedFeed().getVideoEnabled() && vm.highlightedFeed().getCameraEnable()" ng-class="{mirrored: vm.mirrored()}"></div><div ng-if="vm.highlightedFeed().isShareScreen" id="main-video" jh-main-screen-feed="true" feed="vm.highlightedFeed()" ng-show="vm.highlightedFeed().getVideoEnabled() && vm.highlightedFeed().getCameraEnable()" ng-class="{mirrored: vm.mirrored()}"></div><div class="video-enable-con"><div class="container-tip" style="display: none" ng-class="{show:(!vm.highlightedFeed().getVideoEnabled() || !vm.highlightedFeed().getCameraEnable())}"><div class="center tip_span"><span class="custome-btn disable-icon center" title="{{\'video_disable_hint\' | translate}}"><span class="iconfontguanshipin icon_new icon_big icon_disable"></span></span></div><div class="center tip_span">{{vm.highlightedFeed().getDisplayName()}}{{\'video_disable_hint1\' | translate}}</div></div></div><jh-invite-panel ng-show="vm.feeds().length == 1"></jh-invite-panel><div class="controller-panel" ng-show="vm.show"><div class="center"><jh-invite-button></jh-invite-button><jh-audio-button-main feed="vm.localFeed()"></jh-audio-button-main><jh-video-button-main feed="vm.localFeed()"></jh-video-button-main><jh-chat-button toggle-chat-fn="vm.toggleChatFn" chat-show="vm.isChatShow"></jh-chat-button><jh-screen-share-button></jh-screen-share-button><jh-user-panel></jh-user-panel></div></div><div><div id="thumbnails" ng-show="vm.showFeeds()"><div jh-feed="true" feed="f" ng-repeat="f in vm.feeds() | orderBy:\'+display\'" toggle-highlight-fn="vm.toggleHighlightedFeed(f)" highlighted="vm.isHighlighted(f)" localfeed="vm.localFeed()" highlighted-by-user="vm.isHighlightedByUser(f)"></div></div></div><div class="containers"><div class="containers-div" ng-hide="vm.hideSetting" style="display:inline-block;vertical-align: top;padding-right:15px;padding-top:28px"><span class="custome-btn" ng-click="vm.showSettingDlg()"><i class="settingpng"></i></span></div><div class="containers-div containers-fullscreen" style="display: inline-block;vertical-align: top;padding-right:15px;padding-top:28px"><jh-fullscreen-button></jh-fullscreen-button></div><div class="containers-div chat-container"><jh-chat messages="vm.logEntries()" is-chat-show="vm.isChatShow" ng-show="vm.isChatShow"></jh-chat></div></div></div></div>'),e.put("app/components/feed/buttons/jh-audio-button-main.html",'<span class="custome-btn" ng-click="vm.toggle()" title="{{\'audio_tip_disable\' | translate}}" ng-show="vm.showsDisable()"><span class="maikefeng icon_new icon_big icon_normal"></span></span><span class="custome-btn disable" ng-click="vm.toggle()" title="{{\'audio_tip_enable\' | translate}}" ng-show="vm.showsEnable()"><span class="maikefengjingyin icon_new icon_big icon_normal"></span></span><span disabled="" class="custome-btn disable" title="{{\'audio_tip_disabled\' | translate}}" ng-show="vm.showsAudioOff()"><span class="maikefengjingyin icon_new icon_big icon_normal"></span></span>'),e.put("app/components/feed/buttons/jh-audio-button.html",'<span ng-class="{\'icon-primary\': vm.feed.getSpeaking()}" ng-click="vm.toggle($event)" title="{{\'audio_tip_disable\' | translate}}" ng-show="vm.showsDisable()"><span class="maikefeng icon_new icon_small icon_normal"></span></span><span class="disable" ng-click="vm.toggle($event)" title="{{\'audio_tip_enable\' | translate}}" ng-show="vm.showsEnable()"><span class="maikefengjingyin icon_new icon_small icon_normal"></span></span>'),e.put("app/components/feed/buttons/jh-ignore-button-text.html",'<button type="button" class="btn btn-xs btn-default" ng-click="vm.ignore()" title="Ignore" ng-show="vm.showsIgnore()"><span class="glyphicon glyphicon-ban-circle"></span></button><button type="button" class="btn btn-xs btn-danger" ng-click="vm.stopIgnoring()" title="Stop ignoring" ng-show="vm.showsStopIgnoring()"><span class="glyphicon glyphicon-ban-circle"></span></button>'),e.put("app/components/feed/buttons/jh-ignore-button.html",'<button type="button" class="btn btn-xs btn-default" ng-click="vm.ignore()" title="Ignore" ng-show="vm.showsIgnore()"><span class="glyphicon glyphicon-ban-circle"></span></button><button type="button" class="btn btn-xs btn-danger" ng-click="vm.stopIgnoring()" title="Stop ignoring" ng-show="vm.showsStopIgnoring()"><span class="glyphicon glyphicon-ban-circle"></span></button>'),e.put("app/components/feed/buttons/jh-sticky-button.html",'<div class="func-video cursor" ng-show="vm.showsEnable()" title="{{\'sticky\' | translate}}" ng-click="vm.click($event)">{{\'sticky\' | translate}}</div><div class="func-video cursor" ng-show="vm.showsDisable()" title="{{\'unsticky\' | translate}}" ng-click="vm.click($event)">{{\'unsticky\' | translate}}</div>'),e.put("app/components/feed/buttons/jh-unpublish-button.html",'<span ng-show="vm.isVisible()" ng-click="vm.click()" title="{{\'stop_sharing\' | translate}}"><span class="guanbi icon_new icon_small icon_normal"></span></span>'),e.put("app/components/feed/buttons/jh-video-button-main.html",'<span class="custome-btn" ng-click="vm.toggle()" title="{{\'video_tip_disable\' | translate}}" ng-show="vm.showsDisable()"><span class="shipin icon_new icon_big icon_normal"></span></span><span class="custome-btn disable" ng-click="vm.toggle()" title="{{\'video_tip_enable\' | translate}}" ng-show="vm.showsEnable()"><span class="iconfontguanshipin icon_new icon_big icon_normal icon_disable"></span></span>'),e.put("app/components/feed/buttons/jh-video-button.html",'<span class="custome-btn disable center video-center" title="{{\'video_disable_hint\' | translate}}" ng-show="vm.showsEnable()"><span class="iconfontguanshipin icon_new icon_big icon_disable"></span></span>')
}]);